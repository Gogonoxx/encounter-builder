<div class="encounter-builder-input">
  <div class="form-group">
    <label>Encounter Type</label>
    <div class="difficulty-options">
      <label class="radio-label">
        <input type="radio" name="encounterType" value="combat" checked />
        âš”ï¸ Combat
      </label>
      <label class="radio-label">
        <input type="radio" name="encounterType" value="influence" />
        ğŸ—£ï¸ Influence
      </label>
      <label class="radio-label">
        <input type="radio" name="encounterType" value="research" />
        ğŸ“š Research
      </label>
      <label class="radio-label">
        <input type="radio" name="encounterType" value="chase" />
        ğŸƒ Chase
      </label>
      <label class="radio-label">
        <input type="radio" name="encounterType" value="infiltration" />
        ğŸ­ Infiltration
      </label>
      <label class="radio-label">
        <input type="radio" name="encounterType" value="dungeon" />
        ğŸ° Dungeon
      </label>
    </div>
  </div>

  <!-- Party Level - needed for both Combat AND Influence (for DC calculation) -->
  <div class="form-group">
    <label for="partyLevel">Party Level</label>
    <input type="number" name="partyLevel" id="partyLevel" value="{{partyLevel}}" min="1" max="25" />
  </div>

  <!-- Influence-specific field (shown only when influence is selected) -->
  <div class="form-group influence-only" style="display: none;">
    <label for="influencePrompt">NPC & Ziel <span class="required">*</span></label>
    <textarea name="influencePrompt" id="influencePrompt" rows="5" placeholder="Beschreibe den NPC und was die Spieler erreichen wollen.

Beispiel:
HÃ¤ndler Marcus Wellford - die Spieler wollen einen besseren Preis fÃ¼r magische GegenstÃ¤nde aushandeln. Marcus war frÃ¼her selbst Abenteurer und respektiert Kampferfahrung."></textarea>
  </div>

  <!-- Research-specific field (shown only when research is selected) -->
  <div class="form-group research-only" style="display: none;">
    <label for="researchPrompt">Ort & Kontext <span class="required">*</span></label>
    <textarea name="researchPrompt" id="researchPrompt" rows="5" placeholder="Beschreibe den Forschungsort und welche Geheimnisse hier verborgen sind.

Beispiel:
Die Ruinen von Nyssilion - ein vergessener Tempel der 13. Ordnung. Die Spieler suchen Hinweise auf Kaelor DÃ¤mmerstahls Vergangenheit. Hier wurde der Pakt mit Kronos besiegelt."></textarea>
  </div>

  <!-- Chase-specific fields (shown only when chase is selected) -->
  <div class="form-group chase-only" style="display: none;">
    <label for="chaseType">Chase-Typ</label>
    <select name="chaseType" id="chaseType">
      <option value="run_away">ğŸƒ Flucht (PCs fliehen vor Verfolgern)</option>
      <option value="chase_down">ğŸ¯ Verfolgung (PCs jagen jemanden)</option>
      <option value="beat_clock">â±ï¸ Wettlauf gegen die Zeit</option>
      <option value="competitive">ğŸ Konkurrenz (zwei Gruppen zum Ziel)</option>
    </select>
  </div>

  <div class="form-group chase-only" style="display: none;">
    <label for="chaseLength">LÃ¤nge</label>
    <select name="chaseLength" id="chaseLength">
      <option value="6">Kurz (6 Hindernisse)</option>
      <option value="8" selected>Mittel (8 Hindernisse)</option>
      <option value="10">Lang (10 Hindernisse)</option>
    </select>
  </div>

  <div class="form-group chase-only" style="display: none;">
    <label for="chaseTerrain">Terrain</label>
    <select name="chaseTerrain" id="chaseTerrain">
      <option value="underground">ğŸ•³ï¸ Underground (HÃ¶hlen, Dungeons)</option>
      <option value="urban">ğŸ˜ï¸ Urban (Stadt, DÃ¤cher)</option>
      <option value="wilderness">ğŸŒ² Wilderness (Wald, Berge, FlÃ¼sse)</option>
      <option value="steppe">ğŸŒ¾ Steppe (Orfnir Grasland)</option>
      <option value="ruins">ğŸ›ï¸ Ruinen (Nyssilion, Tempel)</option>
      <option value="mixed">ğŸ² Gemischt</option>
    </select>
  </div>

  <div class="form-group chase-only" style="display: none;">
    <label for="chaseContext">Kontext <span class="required">*</span></label>
    <textarea name="chaseContext" id="chaseContext" rows="4" placeholder="Beschreibe die Chase-Situation: Wer jagt wen? Warum? Was passiert bei Erfolg/Misserfolg?

Beispiel:
Die Gruppe hat den Minotauren-Schrein entweiht und muss jetzt durch das unterirdische Labyrinth fliehen. Ghorvak Blutgeweih und seine Krieger sind ihnen auf den Fersen."></textarea>
  </div>

  <!-- Dungeon-specific fields (shown only when dungeon is selected) -->
  <div class="form-group dungeon-only" style="display: none;">
    <label for="dungeonSize">Dungeon-GrÃ¶ÃŸe</label>
    <select name="dungeonSize" id="dungeonSize">
      <option value="4">Klein (4 RÃ¤ume)</option>
      <option value="5" selected>Mittel (5 RÃ¤ume)</option>
      <option value="6">GroÃŸ (6 RÃ¤ume)</option>
    </select>
  </div>

  <div class="form-group dungeon-only" style="display: none;">
    <label for="dungeonTheme">Setting</label>
    <select name="dungeonTheme" id="dungeonTheme">
      <option value="ruins">ğŸ›ï¸ Ruinen (verfallene Strukturen)</option>
      <option value="cave">ğŸ•³ï¸ HÃ¶hle (natÃ¼rliche Formationen)</option>
      <option value="temple">â›ª Tempel (religiÃ¶se StÃ¤tte)</option>
      <option value="fortress">ğŸ° Festung (militÃ¤rische Anlage)</option>
      <option value="crypt">âš°ï¸ Krypta (GrabstÃ¤tte)</option>
      <option value="laboratory">ğŸ§ª Labor (Forschungseinrichtung)</option>
      <option value="mine">â›ï¸ Mine (Bergwerk)</option>
      <option value="sewers">ğŸš° Kanalisation (unterirdische Stadt)</option>
    </select>
  </div>

  <div class="form-group dungeon-only" style="display: none;">
    <label for="dungeonThreat">PrimÃ¤re Bedrohung</label>
    <select name="dungeonThreat" id="dungeonThreat">
      <option value="undead">ğŸ’€ Untote</option>
      <option value="construct">ğŸ¤– Konstrukte</option>
      <option value="humanoid">ğŸ‘¤ Humanoide (Banditen, Kultisten)</option>
      <option value="beast">ğŸº Bestien</option>
      <option value="aberration">ğŸ‘ï¸ Aberrationen</option>
      <option value="demon">ğŸ˜ˆ DÃ¤monen</option>
      <option value="elemental">ğŸ”¥ Elementare</option>
      <option value="ooze">ğŸŸ¢ Schleim</option>
      <option value="plant">ğŸŒ¿ Pflanzen</option>
      <option value="dragon">ğŸ‰ Drachen</option>
    </select>
  </div>

  <div class="form-group dungeon-only" style="display: none;">
    <label class="checkbox-label">
      <input type="checkbox" name="dungeonBoss" id="dungeonBoss" checked />
      Boss-Raum einschlieÃŸen
    </label>
  </div>

  <div class="form-group dungeon-only" style="display: none;">
    <label for="dungeonContext">Kontext <span class="required">*</span></label>
    <textarea name="dungeonContext" id="dungeonContext" rows="4" placeholder="Warum betreten die PCs den Dungeon? Was suchen sie?

Beispiel:
Die Spieler suchen das Grab von KÃ¶nig Aldric. Laut GerÃ¼chten ruht dort ein mÃ¤chtiges Artefakt - aber der KÃ¶nig wurde von einem Nekromanten verflucht und seine Wachen sind nie gestorben."></textarea>
  </div>

  <!-- Combat-specific fields -->

  <div class="form-group combat-only">
    <label for="partySize">Number of Players</label>
    <input type="number" name="partySize" id="partySize" value="{{partySize}}" min="1" max="8" />
  </div>

  <div class="form-group combat-only">
    <label>Difficulty</label>
    <div class="difficulty-options">
      <label class="radio-label">
        <input type="radio" name="difficulty" value="moderate" {{#if (eq difficulty "moderate")}}checked{{/if}} />
        Moderate (80 XP)
      </label>
      <label class="radio-label">
        <input type="radio" name="difficulty" value="severe" {{#if (eq difficulty "severe")}}checked{{/if}} />
        Severe (120 XP)
      </label>
      <label class="radio-label">
        <input type="radio" name="difficulty" value="extreme" {{#if (eq difficulty "extreme")}}checked{{/if}} />
        Extreme (160 XP)
      </label>
    </div>
  </div>

  <div class="form-group combat-only">
    <label for="terrain">Terrain</label>
    <select name="terrain" id="terrain">
      {{#each terrainOptions}}
        <option value="{{this.value}}">{{this.label}}</option>
      {{/each}}
    </select>
  </div>

  <div class="form-group combat-only">
    <label>Include Creature Types (optional)</label>
    <div class="trait-checkboxes">
      {{#each creatureTraits}}
        <label class="checkbox-label">
          <input type="checkbox" name="includeTraits" value="{{this}}" />
          {{this}}
        </label>
      {{/each}}
    </div>
  </div>

  <div class="form-group combat-only">
    <label>Exclude Creature Types (optional)</label>
    <div class="trait-checkboxes">
      {{#each creatureTraits}}
        <label class="checkbox-label">
          <input type="checkbox" name="excludeTraits" value="{{this}}" />
          {{this}}
        </label>
      {{/each}}
    </div>
  </div>

  <div class="form-group">
    <label for="narrativeHook">Narrative Hook (optional)</label>
    <textarea name="narrativeHook" id="narrativeHook" rows="3" placeholder="E.g., The players are searching for a missing merchant in the swamp..."></textarea>
  </div>

  <div class="form-buttons">
    <button type="button" class="cancel-btn" data-action="close">
      <i class="fas fa-times"></i> Cancel
    </button>
    <button type="submit" class="generate-btn">
      <i class="fas fa-dice-d20"></i> Generate Encounter
    </button>
  </div>
</div>
