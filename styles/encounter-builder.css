/* ============================================================================
   PF2E Encounter Builder - Pathfinder 2E Theme
   Colors: Browns (#5c0000, #3a2318, #5e3929), Red (#5c0000), Tan (#c9b18a)
   ============================================================================ */

:root {
  --eb-red: #5c0000;
  --eb-brown-dark: #3a2318;
  --eb-brown-medium: #5e3929;
  --eb-brown-light: #7a4c3a;
  --eb-tan: #c9b18a;
  --eb-tan-light: #e8dcc4;
  --eb-tan-dark: #a89672;
  --eb-gold: #c4a000;
  --eb-text: #1c1612;
  --eb-text-light: #f5f0e6;
}

/* ----------------------------------------------------------------------------
   Window Styling
   ---------------------------------------------------------------------------- */

.encounter-builder.application {
  background: linear-gradient(135deg, var(--eb-brown-dark) 0%, var(--eb-brown-medium) 100%);
  border: 3px solid var(--eb-red);
  border-radius: 8px;
}

.encounter-builder .window-header {
  background: var(--eb-red);
  border-bottom: 2px solid var(--eb-tan-dark);
  color: var(--eb-tan-light);
}

.encounter-builder .window-header .window-title {
  color: var(--eb-tan-light);
  text-shadow: 1px 1px 2px rgba(0,0,0,0.5);
}

.encounter-builder .window-content {
  background: linear-gradient(180deg, var(--eb-tan-light) 0%, var(--eb-tan) 100%);
  color: var(--eb-text);
  padding: 1rem;
  overflow-y: auto !important;
  overflow-x: hidden;
}

/* ----------------------------------------------------------------------------
   Input Modal
   ---------------------------------------------------------------------------- */

.encounter-builder-input {
  padding: 0.5rem;
}

.encounter-builder-input .form-group {
  margin-bottom: 1rem;
}

.encounter-builder-input .form-group > label {
  display: block;
  font-weight: bold;
  margin-bottom: 0.5rem;
  color: var(--eb-brown-dark);
  font-size: 1rem;
  text-transform: uppercase;
  letter-spacing: 0.5px;
}

/* Input Fields - Fixed visibility */
.encounter-builder-input input[type="number"],
.encounter-builder-input select,
.encounter-builder-input textarea {
  width: 100%;
  padding: 0.6rem 0.8rem;
  border: 2px solid var(--eb-brown-medium);
  border-radius: 4px;
  background: #fff;
  color: var(--eb-text);
  font-size: 1rem;
  font-family: inherit;
}

/* Select dropdown - prevent text truncation */
.encounter-builder-input select {
  text-overflow: ellipsis;
  padding-right: 2rem; /* Space for dropdown arrow */
  appearance: none;
  -webkit-appearance: none;
  -moz-appearance: none;
  background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='12' height='12' viewBox='0 0 12 12'%3E%3Cpath fill='%23333' d='M6 8L1 3h10z'/%3E%3C/svg%3E");
  background-repeat: no-repeat;
  background-position: right 0.7rem center;
  background-size: 12px;
  color: #1c1612 !important;
  background-color: #fff !important;
  /* Fix text visibility - explicit sizing */
  height: 2.4rem !important;
  line-height: 1.2 !important;
  padding-top: 0.4rem !important;
  padding-bottom: 0.4rem !important;
  overflow: visible !important;
  vertical-align: middle;
}

.encounter-builder-input select option {
  padding: 0.5rem;
  white-space: normal;
  word-wrap: break-word;
  color: #1c1612 !important;
  background-color: #fff !important;
  line-height: 1.4;
}

.encounter-builder-input input[type="number"]:focus,
.encounter-builder-input select:focus,
.encounter-builder-input textarea:focus {
  outline: none;
  border-color: var(--eb-red);
  box-shadow: 0 0 4px rgba(92, 0, 0, 0.3);
}

.encounter-builder-input input[type="number"]::placeholder,
.encounter-builder-input textarea::placeholder {
  color: #999;
}

/* Difficulty Radio Buttons */
.encounter-builder-input .difficulty-options {
  display: flex;
  gap: 0.5rem;
  flex-wrap: wrap;
}

.encounter-builder-input .radio-label {
  display: flex;
  align-items: center;
  gap: 0.4rem;
  cursor: pointer;
  padding: 0.5rem 1rem;
  background: var(--eb-tan);
  border: 2px solid var(--eb-brown-medium);
  border-radius: 4px;
  transition: all 0.2s;
}

.encounter-builder-input .radio-label:hover {
  background: var(--eb-tan-dark);
}

.encounter-builder-input .radio-label:has(input:checked) {
  background: var(--eb-red);
  color: var(--eb-tan-light);
  border-color: var(--eb-red);
}

.encounter-builder-input .radio-label input[type="radio"] {
  accent-color: var(--eb-red);
  width: 1rem;
  height: 1rem;
}

/* Trait Checkboxes */
.encounter-builder-input .trait-checkboxes {
  display: grid;
  grid-template-columns: repeat(auto-fill, minmax(120px, 1fr));
  gap: 0.4rem;
  max-height: 150px;
  overflow-y: auto;
  padding: 0.5rem;
  border: 2px solid var(--eb-brown-medium);
  border-radius: 4px;
  background: #fff;
}

.encounter-builder-input .checkbox-label {
  display: flex;
  align-items: center;
  gap: 0.3rem;
  cursor: pointer;
  padding: 0.25rem 0.5rem;
  border-radius: 3px;
  font-size: 0.9rem;
  text-transform: capitalize;
}

.encounter-builder-input .checkbox-label:hover {
  background: var(--eb-tan);
}

.encounter-builder-input .checkbox-label input[type="checkbox"] {
  accent-color: var(--eb-red);
  width: 1rem;
  height: 1rem;
}

/* Campaign-specific checkbox */
.encounter-builder-input .checkbox-label.campaign-specific {
  background: linear-gradient(135deg, var(--eb-tan) 0%, var(--eb-tan-light) 100%);
  border: 2px solid var(--eb-brown-medium);
  padding: 0.5rem 0.75rem;
  border-radius: 4px;
  margin-top: 0.5rem;
}

.encounter-builder-input .checkbox-label.campaign-specific:hover {
  border-color: var(--eb-red);
  box-shadow: 0 0 4px rgba(92, 0, 0, 0.3);
}

/* Hint text */
.encounter-builder-input .hint {
  font-size: 0.8rem;
  color: var(--eb-brown-light);
  font-style: italic;
  margin-top: 0.3rem;
  padding-left: 0.5rem;
}

/* Textarea */
.encounter-builder-input textarea {
  resize: vertical;
  min-height: 70px;
}

/* Form Buttons */
.encounter-builder-input .form-buttons {
  display: flex;
  justify-content: flex-end;
  gap: 0.75rem;
  margin-top: 1.5rem;
  padding-top: 1rem;
  border-top: 2px solid var(--eb-brown-medium);
}

.encounter-builder-input .generate-btn {
  background: var(--eb-red);
  color: var(--eb-tan-light);
  border: none;
  padding: 0.6rem 1.2rem;
  border-radius: 4px;
  cursor: pointer;
  font-weight: bold;
  font-size: 1rem;
  text-transform: uppercase;
  letter-spacing: 1px;
  transition: all 0.2s;
}

.encounter-builder-input .generate-btn:hover {
  background: #7a0000;
  transform: translateY(-1px);
  box-shadow: 0 3px 6px rgba(0,0,0,0.3);
}

.encounter-builder-input .cancel-btn {
  background: var(--eb-tan);
  color: var(--eb-brown-dark);
  border: 2px solid var(--eb-brown-medium);
  padding: 0.6rem 1.2rem;
  border-radius: 4px;
  cursor: pointer;
  font-weight: bold;
  transition: all 0.2s;
}

.encounter-builder-input .cancel-btn:hover {
  background: var(--eb-tan-dark);
}

/* ----------------------------------------------------------------------------
   Output Modal
   ---------------------------------------------------------------------------- */

.encounter-builder-output {
  padding: 0.5rem;
  min-height: 600px;
  max-height: 80vh;
  display: flex;
  flex-direction: column;
  overflow-y: auto;
  overflow-x: hidden;
}

.encounter-header {
  text-align: center;
  padding: 1rem;
  margin-bottom: 1rem;
  background: var(--eb-red);
  border-radius: 4px;
  color: var(--eb-tan-light);
}

.encounter-header h2 {
  margin: 0 0 0.5rem 0;
  font-size: 1.5rem;
  text-shadow: 1px 1px 2px rgba(0,0,0,0.5);
}

.encounter-meta {
  display: flex;
  justify-content: center;
  gap: 1rem;
  flex-wrap: wrap;
}

.encounter-meta .difficulty {
  padding: 0.25rem 0.75rem;
  border-radius: 4px;
  font-weight: bold;
  text-transform: uppercase;
  background: var(--eb-brown-dark);
}

.encounter-meta .xp-budget {
  color: var(--eb-tan);
}

.encounter-header .xp-breakdown {
  margin-top: 0.5rem;
  font-size: 0.85rem;
  color: var(--eb-tan);
  opacity: 0.9;
}

/* Front Reference Block */
.front-block {
  background: var(--eb-tan-light);
  border-left: 4px solid var(--eb-red);
  padding: 0.75rem;
}

.front-block p {
  margin: 0 0 0.5rem 0;
}

.front-block p:last-child {
  margin-bottom: 0;
}

/* Monster Behavior */
.monster-behavior {
  background: var(--eb-tan-light);
  padding: 0.5rem 1rem !important;
  font-style: italic;
  color: var(--eb-brown-dark);
  border-top: none !important;
}

/* Monster Personality */
.monster-personality {
  background: rgba(92, 0, 0, 0.05);
  padding: 0.4rem 1rem !important;
  font-size: 0.9rem;
  color: var(--eb-brown-medium);
  border-top: none !important;
}

/* Monster Dialog */
.monster-dialog {
  background: rgba(139, 69, 19, 0.08);
  padding: 0.4rem 1rem !important;
  font-size: 0.95rem;
  color: var(--eb-brown-dark);
  border-top: none !important;
  border-bottom: 2px solid var(--eb-tan-dark);
}

/* Battlefield */
.battlefield-description {
  margin-bottom: 0.75rem;
  color: var(--eb-brown-dark);
  font-style: italic;
}

.creative-use {
  color: var(--eb-red);
  font-size: 0.9rem;
  display: inline-block;
  margin-top: 0.25rem;
}

.encounter-section {
  margin-bottom: 1.25rem;
  background: #fff;
  border: 2px solid var(--eb-brown-medium);
  border-radius: 4px;
}

/* Section content - scrollable when long */
.encounter-section > *:not(h3):not(.monster-table-wrapper) {
  max-height: 200px;
  overflow-y: auto;
}

/* Monster table gets more space */
.encounter-section .monster-table-wrapper {
  max-height: 300px;
  overflow-y: auto;
}

.encounter-section h3 {
  margin: 0;
  padding: 0.5rem 0.75rem;
  background: var(--eb-brown-medium);
  color: var(--eb-tan-light);
  font-size: 1rem;
  text-transform: uppercase;
  letter-spacing: 0.5px;
}

.encounter-section h3 i {
  margin-right: 0.5rem;
}

.encounter-section > *:not(h3) {
  padding: 0.75rem;
}

/* Monster Table */
.monster-table {
  width: 100%;
  border-collapse: collapse;
  margin: 0;
}

.monster-table th,
.monster-table td {
  padding: 0.5rem;
  text-align: left;
  border-bottom: 1px solid var(--eb-tan);
}

.monster-table th {
  background: var(--eb-tan);
  font-weight: bold;
  color: var(--eb-brown-dark);
  text-transform: uppercase;
  font-size: 0.85rem;
}

.monster-table tr:last-child td {
  border-bottom: none;
}

.monster-table tr:hover td {
  background: var(--eb-tan-light);
}

/* Terrain List */
.terrain-list {
  margin: 0;
  padding-left: 1.5rem;
  list-style: square;
}

.terrain-list li {
  margin-bottom: 0.5rem;
  color: var(--eb-text);
}

.terrain-list li em {
  color: var(--eb-brown-medium);
}

/* Hazard Block */
.hazard-block {
  background: var(--eb-tan-light);
  border-left: 4px solid var(--eb-red);
}

.hazard-block h4 {
  margin: 0 0 0.5rem 0;
  color: var(--eb-red);
}

.complex-badge {
  background: var(--eb-red);
  color: var(--eb-tan-light);
  font-size: 0.7rem;
  font-weight: bold;
  padding: 0.15rem 0.4rem;
  border-radius: 3px;
  text-transform: uppercase;
  vertical-align: middle;
  margin-left: 0.5rem;
}

.hazard-routine {
  background: rgba(92, 0, 0, 0.08);
  border-radius: 4px;
  padding: 0.75rem;
  margin: 0.5rem 0;
}

.routine-list {
  margin: 0.5rem 0 0 0;
  padding-left: 1.5rem;
}

.routine-list li {
  margin-bottom: 0.5rem;
  line-height: 1.4;
}

.routine-list li:last-child {
  margin-bottom: 0;
}

/* Tactics Block */
.tactics-block,
.roleplaying-block,
.narrative-block {
  background: var(--eb-tan-light);
  padding: 0.75rem !important;
  border-radius: 4px;
  margin-bottom: 0.5rem;
}

.tactics-block p,
.roleplaying-block p,
.narrative-block p {
  margin: 0 0 0.5rem 0;
}

.tactics-block p:last-child,
.roleplaying-block p:last-child,
.narrative-block p:last-child {
  margin-bottom: 0;
}

/* Win Conditions */
.win-conditions {
  margin: 0;
  padding-left: 1.5rem;
  list-style: none;
}

.win-conditions li {
  margin-bottom: 0.25rem;
  position: relative;
}

.win-conditions li::before {
  content: "âœ“";
  color: var(--eb-red);
  font-weight: bold;
  position: absolute;
  left: -1.25rem;
}

/* Footer */
.encounter-footer {
  display: flex;
  justify-content: flex-end;
  gap: 0.75rem;
  margin-top: auto;
  padding-top: 1rem;
  border-top: 2px solid var(--eb-brown-medium);
}

.encounter-footer .regenerate-btn {
  background: var(--eb-tan);
  color: var(--eb-brown-dark);
  border: 2px solid var(--eb-brown-medium);
  padding: 0.5rem 1rem;
  border-radius: 4px;
  cursor: pointer;
  font-weight: bold;
  transition: all 0.2s;
}

.encounter-footer .regenerate-btn:hover {
  background: var(--eb-tan-dark);
}

.encounter-footer .save-btn {
  background: var(--eb-red);
  color: var(--eb-tan-light);
  border: none;
  padding: 0.5rem 1rem;
  border-radius: 4px;
  cursor: pointer;
  font-weight: bold;
  transition: all 0.2s;
}

.encounter-footer .save-btn:hover {
  background: #7a0000;
}

/* Scrollbar Styling */
.encounter-builder ::-webkit-scrollbar {
  width: 8px;
}

.encounter-builder ::-webkit-scrollbar-track {
  background: var(--eb-tan);
  border-radius: 4px;
}

.encounter-builder ::-webkit-scrollbar-thumb {
  background: var(--eb-brown-medium);
  border-radius: 4px;
}

.encounter-builder ::-webkit-scrollbar-thumb:hover {
  background: var(--eb-brown-dark);
}

/* ----------------------------------------------------------------------------
   NEW: Situation Badge & Player Hook
   ---------------------------------------------------------------------------- */

.situation-block {
  display: inline-block;
}

.situation-badge {
  background: var(--eb-brown-dark);
  color: var(--eb-tan-light);
  padding: 0.3rem 0.8rem;
  border-radius: 4px;
  font-size: 0.85rem;
  font-weight: bold;
  text-transform: uppercase;
}

.player-hook-section {
  border-left: 4px solid var(--eb-gold);
}

.player-hook-block {
  background: rgba(255, 215, 0, 0.1);
  padding: 0.75rem;
  border-radius: 4px;
}

.player-hook-block p {
  margin: 0.3rem 0;
}

/* ----------------------------------------------------------------------------
   NEW: Monster Personality
   ---------------------------------------------------------------------------- */

.monster-personality {
  background: rgba(139, 69, 19, 0.15);
  padding: 0.5rem 1rem;
  font-size: 0.9rem;
}

/* ----------------------------------------------------------------------------
   NEW: Story Progression
   ---------------------------------------------------------------------------- */

.story-progression {
  background: var(--eb-tan-dark);
  padding: 0.75rem;
  border-radius: 4px;
  border-left: 4px solid var(--eb-gold);
  margin-top: 0.5rem;
}

/* ----------------------------------------------------------------------------
   NEW: Win Conditions (Detailed)
   ---------------------------------------------------------------------------- */

.win-conditions-block {
  padding: 0;
}

.primary-win-condition {
  background: rgba(92, 0, 0, 0.1);
  padding: 0.75rem;
  border-radius: 4px;
  margin-bottom: 1rem;
}

.primary-win-condition p {
  margin: 0.25rem 0;
}

.win-method {
  color: var(--eb-brown-medium);
  font-size: 0.9rem;
}

.win-alternatives {
  margin-bottom: 1rem;
}

.win-alternatives h4 {
  margin: 0 0 0.75rem 0;
  font-size: 1rem;
  color: var(--eb-brown-dark);
}

.win-alternative {
  background: rgba(139, 69, 19, 0.08);
  padding: 0.75rem;
  border-radius: 4px;
  margin-bottom: 0.5rem;
  border-left: 3px solid var(--eb-gold);
}

.win-alternative p {
  margin: 0.2rem 0;
}

.alt-name {
  font-size: 1rem;
  color: var(--eb-brown-dark);
}

.alt-approach {
  color: var(--eb-brown-medium);
  font-size: 0.9rem;
}

.alt-requirements {
  font-size: 0.9rem;
}

.alt-outcome {
  font-size: 0.9rem;
  color: var(--eb-brown-dark);
}

.win-timer {
  background: rgba(196, 160, 0, 0.15);
  padding: 0.5rem 0.75rem;
  border-radius: 4px;
  border-left: 3px solid var(--eb-gold);
}

.win-timer p {
  margin: 0;
}

.win-timer h4 {
  margin: 0 0 0.5rem 0;
  color: var(--eb-gold-dark);
  font-size: 0.9rem;
}

.timer-list {
  margin: 0;
  padding-left: 1rem;
  list-style: none;
}

.timer-entry {
  position: relative;
  padding: 0.3rem 0;
  padding-left: 1rem;
  border-left: 2px solid var(--eb-gold);
  margin-bottom: 0.5rem;
}

.timer-entry::before {
  content: 'â±ï¸';
  position: absolute;
  left: -0.8rem;
  top: 0.2rem;
  font-size: 0.8rem;
}

.mechanical-impact {
  display: block;
  color: var(--eb-red);
  font-size: 0.85rem;
  margin-top: 0.2rem;
}

/* Escape Options (NEW) */
.escape-options {
  background: rgba(100, 140, 180, 0.15);
  padding: 0.5rem 0.75rem;
  border-radius: 4px;
  border-left: 3px solid #648cb4;
  margin-top: 0.75rem;
}

.escape-options h4 {
  margin: 0 0 0.5rem 0;
  color: #3d6a9a;
  font-size: 0.9rem;
}

.escape-monsters,
.escape-players {
  padding: 0.3rem 0.5rem;
  margin-bottom: 0.5rem;
  background: rgba(255, 255, 255, 0.3);
  border-radius: 3px;
}

.escape-monsters p,
.escape-players p {
  margin: 0.2rem 0;
  font-size: 0.85rem;
}

/* Alternative Type Badge */
.alt-type {
  font-size: 0.7rem;
  color: #666;
  background: rgba(0, 0, 0, 0.1);
  padding: 0.1rem 0.3rem;
  border-radius: 3px;
  margin-left: 0.3rem;
  text-transform: uppercase;
}

/* ----------------------------------------------------------------------------
   NEW: Scene Description (Vorlesetext)
   ---------------------------------------------------------------------------- */

.scene-description-section {
  border-left: 4px solid var(--eb-brown-dark);
  background: linear-gradient(135deg, #fefae0 0%, #f5ebe0 100%);
}

.scene-description-section h3 {
  background: var(--eb-brown-dark);
}

.scene-description-block {
  padding: 0;
}

.read-aloud {
  margin: 0;
  padding: 1rem;
  font-style: italic;
  font-size: 1.05rem;
  line-height: 1.6;
  color: var(--eb-brown-dark);
  background: rgba(255, 248, 220, 0.5);
  border-radius: 4px;
  border: 1px dashed var(--eb-tan-dark);
  position: relative;
}

.read-aloud::before {
  content: open-quote;
  font-size: 2.5rem;
  color: var(--eb-brown-medium);
  position: absolute;
  top: 0.25rem;
  left: 0.5rem;
  opacity: 0.4;
  font-family: Georgia, serif;
}

.scene-placeholder {
  color: #999;
  text-align: center;
  padding: 1rem;
}

/* ----------------------------------------------------------------------------
   INFLUENCE ENCOUNTER STYLES
   ---------------------------------------------------------------------------- */

.influence-encounter-output {
  padding: 0.5rem;
  min-height: 500px;
  display: flex;
  flex-direction: column;
}

/* Influence Header */
.influence-header {
  text-align: center;
  padding: 1rem;
  margin-bottom: 1rem;
  background: var(--eb-red);
  border-radius: 4px;
  color: var(--eb-tan-light);
}

.influence-header .npc-name {
  margin: 0;
  font-size: 1.5rem;
  text-shadow: 1px 1px 2px rgba(0,0,0,0.5);
}

.influence-header .npc-level {
  font-size: 1rem;
  opacity: 0.8;
  font-weight: normal;
}

/* Influence Sections */
.influence-section {
  margin-bottom: 1rem;
  background: #fff;
  border: 2px solid var(--eb-brown-medium);
  border-radius: 4px;
}

.influence-section h2 {
  margin: 0;
  padding: 0.5rem 0.75rem;
  background: var(--eb-brown-medium);
  color: var(--eb-tan-light);
  font-size: 1rem;
  text-transform: uppercase;
  letter-spacing: 0.5px;
}

.influence-section h2 i {
  margin-right: 0.5rem;
}

.influence-section > *:not(h2) {
  padding: 0.75rem;
}

.influence-section .section-hint {
  margin: 0;
  padding: 0.5rem 0.75rem;
  background: var(--eb-tan-light);
  font-size: 0.85rem;
  color: var(--eb-brown-medium);
  font-style: italic;
  border-bottom: 1px solid var(--eb-tan);
}

/* Goal Section */
.goal-section .influence-goal {
  font-size: 1.1rem;
  margin: 0;
}

/* Discovery & Skills Tables */
.discovery-table,
.influence-skills-table {
  width: 100%;
  border-collapse: collapse;
  margin: 0;
}

.discovery-table th,
.discovery-table td,
.influence-skills-table th,
.influence-skills-table td {
  padding: 0.5rem;
  text-align: left;
  border-bottom: 1px solid var(--eb-tan);
}

.discovery-table th,
.influence-skills-table th {
  background: var(--eb-tan);
  font-weight: bold;
  color: var(--eb-brown-dark);
  text-transform: uppercase;
  font-size: 0.85rem;
}

.discovery-table tr:last-child td,
.influence-skills-table tr:last-child td {
  border-bottom: none;
}

.influence-skills-table tr.weakness-note {
  background: rgba(40, 167, 69, 0.1);
}

.influence-skills-table tr.weakness-note td:last-child {
  color: #28a745;
  font-weight: bold;
}

.influence-skills-table tr.resistance-note {
  background: rgba(220, 53, 69, 0.1);
}

.influence-skills-table tr.resistance-note td:last-child {
  color: #dc3545;
  font-weight: bold;
}

/* Thresholds */
.thresholds-list {
  margin: 0;
  padding: 0;
  list-style: none;
}

.thresholds-list li {
  padding: 0.5rem 0;
  border-bottom: 1px dashed var(--eb-tan);
}

.thresholds-list li:last-child {
  border-bottom: none;
}

.thresholds-list li strong {
  color: var(--eb-red);
}

/* Two Column Layout for Resistances/Weaknesses */
.influence-two-column {
  display: grid;
  grid-template-columns: 1fr 1fr;
  gap: 1rem;
  margin-bottom: 1rem;
}

/* Resistances */
.resistances-section {
  border-left: 4px solid #dc3545;
}

.resistances-section h2 {
  background: #dc3545;
}

.resistances-list {
  margin: 0;
  padding: 0;
  list-style: none;
}

.resistances-list li {
  padding: 0.3rem 0;
  color: #dc3545;
}

.resistances-list li strong {
  color: var(--eb-text);
}

/* Weaknesses */
.weaknesses-section {
  border-left: 4px solid #28a745;
}

.weaknesses-section h2 {
  background: #28a745;
}

.weaknesses-list {
  margin: 0;
  padding: 0;
  list-style: none;
}

.weaknesses-list li {
  padding: 0.3rem 0;
  color: #28a745;
}

.weaknesses-list li strong {
  color: var(--eb-text);
}

/* Penalties Section */
.penalties-section {
  border-left: 4px solid #fd7e14;
}

.penalties-section h2 {
  background: #fd7e14;
  color: #fff;
}

.penalties-list {
  margin: 0;
  padding: 0;
  list-style: none;
}

.penalties-list li {
  padding: 0.4rem 0;
  color: #fd7e14;
  border-bottom: 1px dashed rgba(253, 126, 20, 0.3);
}

.penalties-list li:last-child {
  border-bottom: none;
}

.penalties-list li strong {
  color: var(--eb-text);
}

/* Rounds Section */
.rounds-section {
  background: var(--eb-tan-light);
}

.rounds-section p {
  margin: 0;
  text-align: center;
  font-size: 1.1rem;
}

/* Failure Section */
.failure-section {
  border-left: 4px solid #ffc107;
}

.failure-section h2 {
  background: #ffc107;
  color: var(--eb-text);
}

.failure-text {
  margin: 0;
  color: #856404;
}

/* Influence Footer */
.influence-footer {
  display: flex;
  justify-content: flex-end;
  gap: 0.75rem;
  margin-top: auto;
  padding-top: 1rem;
  border-top: 2px solid var(--eb-brown-medium);
}

.influence-footer .regenerate-btn {
  background: var(--eb-tan);
  color: var(--eb-brown-dark);
  border: 2px solid var(--eb-brown-medium);
  padding: 0.5rem 1rem;
  border-radius: 4px;
  cursor: pointer;
  font-weight: bold;
  transition: all 0.2s;
}

.influence-footer .regenerate-btn:hover {
  background: var(--eb-tan-dark);
}

.influence-footer .save-btn {
  background: var(--eb-red);
  color: var(--eb-tan-light);
  border: none;
  padding: 0.5rem 1rem;
  border-radius: 4px;
  cursor: pointer;
  font-weight: bold;
  transition: all 0.2s;
}

.influence-footer .save-btn:hover {
  background: #7a0000;
}

/* Input Modal - Required Field Marker */
.encounter-builder-input .required {
  color: #dc3545;
  font-weight: bold;
}

/* Input Modal - Text Input for NPC Name */
.encounter-builder-input input[type="text"] {
  width: 100%;
  padding: 0.6rem 0.8rem;
  border: 2px solid var(--eb-brown-medium);
  border-radius: 4px;
  background: #fff;
  color: var(--eb-text);
  font-size: 1rem;
  font-family: inherit;
}

.encounter-builder-input input[type="text"]:focus {
  outline: none;
  border-color: var(--eb-red);
  box-shadow: 0 0 4px rgba(92, 0, 0, 0.3);
}

.encounter-builder-input input[type="text"]::placeholder {
  color: #999;
}

/* Empty state for lists */
.influence-section .empty {
  color: #999;
  font-style: italic;
  margin: 0;
}

/* ============================================================================
   RESEARCH OUTPUT STYLES
   ============================================================================ */

/* Research-specific color palette - mystical purple/violet theme */
:root {
  --research-purple-dark: #4a1c6b;
  --research-purple-medium: #6b3fa0;
  --research-purple-light: #9b6dc6;
  --research-violet-light: #e8d4f8;
  --research-gold: #d4af37;
}

.research-encounter-output {
  padding: 0.5rem;
  min-height: 500px;
  display: flex;
  flex-direction: column;
}

/* Research Header */
.research-header {
  text-align: center;
  margin-bottom: 1rem;
  padding: 1rem;
  background: linear-gradient(135deg, var(--research-purple-dark), var(--research-purple-medium));
  border-radius: 4px;
  color: white;
}

.research-header .research-title {
  margin: 0;
  font-size: 1.5rem;
  text-shadow: 1px 1px 3px rgba(0,0,0,0.5);
}

.research-header .research-front {
  margin: 0.5rem 0 0 0;
  font-size: 0.9rem;
  opacity: 0.9;
}

.research-header .research-front i {
  margin-right: 0.5rem;
}

/* Research Section Base */
.research-section {
  margin-bottom: 1rem;
  background: #fff;
  border: 2px solid var(--research-purple-medium);
  border-radius: 4px;
}

.research-section h2 {
  margin: 0;
  padding: 0.5rem 0.75rem;
  background: var(--research-purple-medium);
  color: white;
  font-size: 1rem;
  font-weight: bold;
  display: flex;
  align-items: center;
}

.research-section h2 i {
  margin-right: 0.5rem;
}

.research-section > *:not(h2) {
  padding: 0.75rem;
}

.research-section .section-hint {
  margin: 0;
  padding: 0.5rem 0.75rem;
  background: var(--research-violet-light);
  font-size: 0.85rem;
  color: var(--research-purple-dark);
  font-style: italic;
}

/* Location and Atmosphere Sections */
.research-location,
.research-atmosphere {
  margin: 0;
  line-height: 1.5;
}

.research-atmosphere {
  font-style: italic;
  color: #555;
}

/* RP Mechanics Section */
.mechanics-section .rp-rules {
  padding: 0.75rem;
}

.mechanics-section .rp-info {
  display: flex;
  justify-content: space-between;
  margin-bottom: 0.75rem;
  padding-bottom: 0.5rem;
  border-bottom: 1px solid var(--research-purple-light);
}

.mechanics-section .rp-total,
.mechanics-section .round-length {
  font-size: 0.95rem;
}

.rp-table {
  width: 100%;
  border-collapse: collapse;
  font-size: 0.9rem;
}

.rp-table td {
  padding: 0.4rem 0.5rem;
  border-bottom: 1px solid #eee;
}

.rp-table td:first-child {
  width: 60%;
}

.rp-table td:last-child {
  text-align: center;
  font-weight: bold;
}

.rp-table .success {
  color: #2e7d32;
}

.rp-table .failure {
  color: #c62828;
}

/* Fantastische Quellen Section */
.sources-grid {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
  gap: 0.75rem;
  padding: 0.75rem;
}

.source-card {
  background: var(--research-violet-light);
  border: 1px solid var(--research-purple-light);
  border-radius: 4px;
  overflow: hidden;
}

.source-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: 0.5rem 0.75rem;
  background: var(--research-purple-light);
  color: white;
}

.source-name {
  margin: 0;
  font-size: 1rem;
  font-weight: bold;
}

.source-max-rp {
  background: var(--research-gold);
  color: #000;
  padding: 0.2rem 0.5rem;
  border-radius: 3px;
  font-weight: bold;
  font-size: 0.85rem;
}

.source-description {
  padding: 0.5rem 0.75rem;
  margin: 0;
  font-size: 0.9rem;
  line-height: 1.4;
  color: #333;
}

.source-skills {
  width: 100%;
  border-collapse: collapse;
  font-size: 0.85rem;
  background: #fff;
}

.source-skills thead {
  background: var(--research-purple-medium);
  color: white;
}

.source-skills th,
.source-skills td {
  padding: 0.4rem 0.5rem;
  text-align: left;
  border-bottom: 1px solid var(--research-violet-light);
}

.source-skills th {
  font-weight: 600;
}

/* Thresholds Section */
.thresholds-table {
  width: 100%;
  border-collapse: collapse;
}

.thresholds-table th,
.thresholds-table td {
  padding: 0.5rem 0.75rem;
  text-align: left;
  border-bottom: 1px solid #ddd;
}

.thresholds-table thead {
  background: var(--research-purple-medium);
  color: white;
}

.thresholds-table .rp-value {
  font-weight: bold;
  width: 50px;
}

.thresholds-table .xp-value {
  font-weight: bold;
  width: 80px;
}

.thresholds-table .xp-minor .xp-value {
  color: #666;
}

.thresholds-table .xp-major .xp-value {
  color: var(--research-purple-medium);
}

.thresholds-table .xp-legendary {
  background: linear-gradient(90deg, rgba(212,175,55,0.2), transparent);
}

.thresholds-table .xp-legendary .xp-value {
  color: var(--research-gold);
  font-weight: bold;
}

.thresholds-table .secret-text {
  font-size: 0.9rem;
}

/* Complications Section - Research */
.research-builder-output .complications-list {
  display: flex;
  flex-direction: column;
  gap: 0.75rem;
  padding: 0.75rem;
}

.research-builder-output .complication-card {
  background: linear-gradient(135deg, rgba(128, 0, 128, 0.08) 0%, rgba(255, 255, 255, 0.9) 100%);
  border: 1px solid var(--research-purple-light);
  border-left: 4px solid var(--research-purple-medium);
  border-radius: 4px;
  padding: 0.75rem;
}

.research-builder-output .complication-header {
  margin-bottom: 0.5rem;
}

.research-builder-output .complication-trigger {
  display: inline-block;
  background: var(--research-purple-medium);
  color: white;
  padding: 0.2rem 0.5rem;
  border-radius: 3px;
  font-weight: bold;
  font-size: 0.85rem;
}

.research-builder-output .complication-event {
  color: #333;
  font-size: 0.95rem;
  line-height: 1.5;
  margin-bottom: 0.5rem;
}

.research-builder-output .complication-mechanic {
  background: rgba(220, 53, 69, 0.1);
  border-left: 3px solid #dc3545;
  padding: 0.4rem 0.6rem;
  margin-bottom: 0.4rem;
  border-radius: 0 3px 3px 0;
  font-size: 0.9rem;
  color: #721c24;
}

.research-builder-output .complication-mechanic strong {
  color: #dc3545;
}

.research-builder-output .complication-resolution {
  background: rgba(40, 167, 69, 0.1);
  border-left: 3px solid #28a745;
  padding: 0.4rem 0.6rem;
  border-radius: 0 3px 3px 0;
  font-size: 0.9rem;
  color: #155724;
}

.research-builder-output .complication-resolution strong {
  color: #28a745;
}

/* Post to Chat Button for Complications */
.research-builder-output .complication-card .post-to-chat {
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 0.4rem;
  margin-top: 0.75rem;
  padding: 0.4rem 0.8rem;
  background: var(--research-purple-medium);
  color: white;
  border: none;
  border-radius: 4px;
  cursor: pointer;
  font-size: 0.85rem;
  transition: all 0.2s;
}

.research-builder-output .complication-card .post-to-chat:hover {
  background: var(--research-purple-dark);
  transform: translateY(-1px);
}

.research-builder-output .complication-card .post-to-chat i {
  font-size: 0.8rem;
}

/* Complication Chat Message */
.complication-chat {
  background: linear-gradient(135deg, var(--research-violet-light, #e8d4f8), #f5f0ff);
  border: 2px solid var(--research-purple-medium, #6b3fa0);
  border-radius: 6px;
  padding: 0.75rem;
}

.complication-chat h3 {
  color: var(--research-purple-dark, #4a1c6b);
  margin: 0 0 0.5rem 0;
  display: flex;
  align-items: center;
  gap: 0.5rem;
  font-size: 1rem;
}

.complication-chat h3 i {
  color: #dc3545;
}

.complication-chat .complication-event {
  margin: 0.5rem 0;
  color: #333;
}

.complication-chat p {
  margin: 0.25rem 0;
}

.complication-chat .resolution {
  color: #28a745;
  margin-top: 0.5rem;
}

/* Research Footer */
.research-footer {
  display: flex;
  gap: 0.5rem;
  justify-content: center;
  padding: 1rem;
  margin-top: auto;
  background: #f5f5f5;
  border-top: 1px solid #ddd;
}

.research-footer button {
  padding: 0.5rem 1rem;
  border: none;
  border-radius: 4px;
  cursor: pointer;
  font-size: 0.9rem;
  display: flex;
  align-items: center;
  gap: 0.5rem;
  transition: all 0.2s;
}

.research-footer .regenerate-btn {
  background: var(--research-purple-light);
  color: white;
}

.research-footer .regenerate-btn:hover {
  background: var(--research-purple-medium);
}

.research-footer .save-btn {
  background: var(--research-purple-dark);
  color: white;
}

.research-footer .save-btn:hover {
  background: #3a1555;
}

/* Research Section Empty State */
.research-section .empty {
  color: #999;
  font-style: italic;
  margin: 0;
}

/* Research Approach Badges */
.approach-badge {
  display: inline-block;
  padding: 0.15rem 0.4rem;
  border-radius: 3px;
  font-size: 0.75rem;
  font-weight: bold;
  white-space: nowrap;
}

.approach-badge.approach-easy {
  background: #d4edda;
  color: #155724;
  border: 1px solid #c3e6cb;
}

.approach-badge.approach-standard {
  background: #e2e3e5;
  color: #383d41;
  border: 1px solid #d6d8db;
}

.approach-badge.approach-hard {
  background: #f8d7da;
  color: #721c24;
  border: 1px solid #f5c6cb;
}

/* Row highlighting based on approach */
.source-skills tr.approach-easy {
  background: rgba(212, 237, 218, 0.3);
}

.source-skills tr.approach-hard {
  background: rgba(248, 215, 218, 0.3);
}

.source-skills .skill-approach {
  text-align: center;
  width: 80px;
}

/* ============================================================================
   CHASE OUTPUT STYLES
   ============================================================================ */

/* Chase-specific color palette - movement/action green theme */
:root {
  --chase-green-dark: #1a5c38;
  --chase-green-medium: #2d8c53;
  --chase-green-light: #4aba7a;
  --chase-mint-light: #d4f5e3;
  --chase-gold: #d4af37;
  --chase-red: #c94c4c;
}

.chase-builder-output {
  padding: 0.5rem;
  min-height: 500px;
  display: flex;
  flex-direction: column;
}

/* Chase Header */
.chase-header {
  text-align: center;
  margin-bottom: 1rem;
  padding: 1rem;
  background: linear-gradient(135deg, var(--chase-green-dark), var(--chase-green-medium));
  border-radius: 4px;
  color: white;
}

.chase-header .chase-title {
  margin: 0;
  font-size: 1.5rem;
  text-shadow: 1px 1px 3px rgba(0,0,0,0.5);
}

.chase-header .chase-meta {
  display: flex;
  justify-content: center;
  gap: 1rem;
  margin-top: 0.5rem;
}

.chase-type-badge {
  background: rgba(255,255,255,0.2);
  padding: 0.25rem 0.75rem;
  border-radius: 4px;
  font-size: 0.9rem;
}

.chase-length {
  opacity: 0.9;
  font-size: 0.9rem;
}

/* Chase Sections */
.chase-section {
  margin-bottom: 1rem;
  background: #fff;
  border: 2px solid var(--chase-green-medium);
  border-radius: 4px;
}

.chase-section h2 {
  margin: 0;
  padding: 0.5rem 0.75rem;
  background: var(--chase-green-medium);
  color: white;
  font-size: 1rem;
  font-weight: bold;
  display: flex;
  align-items: center;
}

.chase-section h2 i {
  margin-right: 0.5rem;
}

.chase-section > *:not(h2) {
  padding: 0.75rem;
}

/* Scenario Section */
.chase-scenario {
  margin: 0;
  line-height: 1.6;
  font-style: italic;
  color: #333;
}

/* Start Position */
.chase-start-position {
  margin: 0;
  padding: 0.75rem;
  background: var(--chase-mint-light);
  border-left: 4px solid var(--chase-green-dark);
  font-size: 1rem;
}

/* Chase Points Rules */
.chase-rules-summary {
  background: var(--chase-mint-light);
  border-radius: 4px;
  padding: 0.75rem;
}

.chase-rules-summary h4 {
  margin: 0 0 0.5rem 0;
  color: var(--chase-green-dark);
  font-size: 0.95rem;
}

.cp-rules-table {
  width: 100%;
  border-collapse: collapse;
  font-size: 0.9rem;
  margin-bottom: 0.5rem;
}

.cp-rules-table td {
  padding: 0.3rem 0.5rem;
  border-bottom: 1px solid rgba(0,0,0,0.1);
}

.cp-rules-table td:first-child {
  width: 70%;
}

.cp-rules-table .cp-value {
  text-align: center;
  font-weight: bold;
  color: var(--chase-green-dark);
}

.cp-note {
  margin: 0;
  font-size: 0.85rem;
  color: #666;
  font-style: italic;
}

/* Obstacles Grid */
.obstacles-grid {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
  gap: 0.75rem;
  padding: 0.75rem;
}

.obstacle-card {
  background: var(--chase-mint-light);
  border: 1px solid var(--chase-green-light);
  border-radius: 4px;
  overflow: hidden;
}

.obstacle-header {
  display: flex;
  align-items: center;
  gap: 0.5rem;
  padding: 0.5rem 0.75rem;
  background: var(--chase-green-light);
  color: white;
}

.obstacle-number {
  background: var(--chase-green-dark);
  color: white;
  width: 1.8rem;
  height: 1.8rem;
  display: flex;
  align-items: center;
  justify-content: center;
  border-radius: 50%;
  font-weight: bold;
  font-size: 0.9rem;
}

.obstacle-name {
  margin: 0;
  font-size: 1rem;
  flex: 1;
}

.obstacle-cp {
  background: var(--chase-gold);
  color: #000;
  padding: 0.2rem 0.5rem;
  border-radius: 3px;
  font-weight: bold;
  font-size: 0.85rem;
}

.obstacle-description {
  padding: 0.5rem 0.75rem;
  margin: 0;
  font-size: 0.9rem;
  line-height: 1.4;
  color: #333;
  border-bottom: 1px solid rgba(0,0,0,0.1);
}

.obstacle-options {
  width: 100%;
  border-collapse: collapse;
  font-size: 0.85rem;
  background: #fff;
}

.obstacle-options thead {
  background: var(--chase-green-medium);
  color: white;
}

.obstacle-options th,
.obstacle-options td {
  padding: 0.4rem 0.5rem;
  text-align: left;
  border-bottom: 1px solid var(--chase-mint-light);
}

.obstacle-options th {
  font-weight: 600;
}

.obstacle-options .skill-name {
  font-weight: bold;
  color: var(--chase-green-dark);
}

.obstacle-options .skill-dc {
  font-weight: bold;
  text-align: center;
}

.obstacle-options .skill-method {
  font-size: 0.85rem;
  color: #555;
}

/* Obstacle Shortcut */
.obstacle-shortcut {
  background: #e3f2fd;
  border-top: 2px dashed #2196f3;
  padding: 0.5rem 0.75rem;
}

.shortcut-header {
  display: flex;
  align-items: center;
  gap: 0.5rem;
  margin-bottom: 0.25rem;
}

.shortcut-header i {
  color: #1976d2;
}

.shortcut-header strong {
  color: #1976d2;
}

.shortcut-dc {
  margin-left: auto;
  background: #1976d2;
  color: white;
  padding: 0.15rem 0.5rem;
  border-radius: 3px;
  font-size: 0.8rem;
  font-weight: bold;
}

.shortcut-description {
  margin: 0;
  font-size: 0.85rem;
  color: #333;
  font-style: italic;
}

.shortcut-crit-fail {
  margin: 0.25rem 0 0 0;
  font-size: 0.8rem;
  color: #c62828;
}

.shortcut-crit-fail i {
  color: #c62828;
}

/* Obstacle Special Effect */
.obstacle-special-effect {
  background: #ffebee;
  border-top: 2px dashed #c62828;
  padding: 0.5rem 0.75rem;
}

.special-effect-header {
  display: flex;
  align-items: center;
  gap: 0.5rem;
  margin-bottom: 0.25rem;
}

.special-effect-header i {
  color: #c62828;
}

.special-effect-header strong {
  color: #c62828;
}

.special-effect-description {
  margin: 0;
  font-size: 0.85rem;
  color: #333;
}

.effect-damage {
  background: #c62828;
  color: white;
  padding: 0.1rem 0.4rem;
  border-radius: 3px;
  font-weight: bold;
  font-size: 0.8rem;
  margin-right: 0.5rem;
}

.effect-text {
  font-style: italic;
}

/* Card highlights for shortcuts/special effects */
.obstacle-card.has-shortcut {
  border-left: 3px solid #2196f3;
}

.obstacle-card.has-special-effect {
  border-left: 3px solid #c62828;
}

.obstacle-card.has-shortcut.has-special-effect {
  border-left: 3px solid #9c27b0;
}

/* End Conditions */
.end-conditions {
  display: grid;
  grid-template-columns: 1fr 1fr;
  gap: 0.75rem;
  padding: 0.75rem;
}

.end-condition {
  border-radius: 4px;
  padding: 0.75rem;
}

.end-condition h4 {
  margin: 0 0 0.5rem 0;
  font-size: 0.95rem;
}

.end-condition p {
  margin: 0;
  font-size: 0.9rem;
  line-height: 1.4;
}

.end-condition.success {
  background: var(--chase-mint-light);
  border-left: 4px solid var(--chase-green-dark);
}

.end-condition.success h4 {
  color: var(--chase-green-dark);
}

.end-condition.failure {
  background: #fde8e8;
  border-left: 4px solid var(--chase-red);
}

.end-condition.failure h4 {
  color: var(--chase-red);
}

/* Complication */
.chase-complication {
  background: #fff8e1;
  border-left: 4px solid var(--chase-gold);
  padding: 0.75rem;
  border-radius: 0 4px 4px 0;
}

.chase-complication h4 {
  margin: 0 0 0.5rem 0;
  color: #b8860b;
  font-size: 0.95rem;
}

.chase-complication p {
  margin: 0;
  font-size: 0.9rem;
  line-height: 1.4;
}

/* Chase Footer */
.chase-footer {
  display: flex;
  gap: 0.5rem;
  justify-content: center;
  padding: 1rem;
  margin-top: auto;
  background: #f5f5f5;
  border-top: 1px solid #ddd;
}

.chase-footer button {
  padding: 0.5rem 1rem;
  border: none;
  border-radius: 4px;
  cursor: pointer;
  font-size: 0.9rem;
  display: flex;
  align-items: center;
  gap: 0.5rem;
  transition: all 0.2s;
}

.chase-footer .regenerate-btn {
  background: var(--chase-green-light);
  color: white;
}

.chase-footer .regenerate-btn:hover {
  background: var(--chase-green-medium);
}

.chase-footer .save-journal-btn {
  background: var(--chase-green-dark);
  color: white;
}

.chase-footer .save-journal-btn:hover {
  background: #134529;
}

/* ============================================================================
   DUNGEON OUTPUT STYLES
   ============================================================================ */

/* Dungeon-specific color palette - stone/dungeon theme */
:root {
  --dungeon-stone-dark: #2c3e50;
  --dungeon-stone-medium: #34495e;
  --dungeon-stone-light: #5d6d7e;
  --dungeon-sand-light: #f5f0e6;
  --dungeon-gold: #d4af37;
  --dungeon-torch: #e67e22;
  --dungeon-boss-red: #8b0000;
}

.dungeon-builder-output {
  padding: 0.5rem;
  min-height: 500px;
  display: flex;
  flex-direction: column;
}

/* Dungeon Header */
.dungeon-header {
  text-align: center;
  margin-bottom: 1rem;
  padding: 1rem;
  background: linear-gradient(135deg, var(--dungeon-stone-dark), var(--dungeon-stone-medium));
  border-radius: 4px;
  color: white;
}

.dungeon-header .dungeon-title {
  margin: 0;
  font-size: 1.5rem;
  text-shadow: 1px 1px 3px rgba(0,0,0,0.5);
}

.dungeon-header .dungeon-meta {
  display: flex;
  justify-content: center;
  gap: 1rem;
  margin-top: 0.5rem;
}

.dungeon-theme-badge {
  background: rgba(255,255,255,0.2);
  padding: 0.25rem 0.75rem;
  border-radius: 4px;
  font-size: 0.9rem;
}

.dungeon-room-count {
  opacity: 0.9;
  font-size: 0.9rem;
}

/* Dungeon Sections */
.dungeon-section {
  margin-bottom: 1rem;
  background: #fff;
  border: 2px solid var(--dungeon-stone-medium);
  border-radius: 4px;
}

.dungeon-section h2 {
  margin: 0;
  padding: 0.5rem 0.75rem;
  background: var(--dungeon-stone-medium);
  color: white;
  font-size: 1rem;
  font-weight: bold;
  display: flex;
  align-items: center;
}

.dungeon-section h2 i {
  margin-right: 0.5rem;
}

.dungeon-section > *:not(h2) {
  padding: 0.75rem;
}

/* Concept Section */
.dungeon-concept {
  margin: 0;
  line-height: 1.6;
  font-size: 1.05rem;
  color: #333;
}

/* Faction Section */
.dungeon-faction {
  background: linear-gradient(135deg, rgba(139, 0, 0, 0.1) 0%, rgba(212, 175, 55, 0.1) 100%);
  border: 1px solid rgba(139, 0, 0, 0.3);
  border-radius: 6px;
  padding: 0.75rem;
  margin-top: 0.75rem;
}

.faction-header {
  display: flex;
  align-items: center;
  gap: 0.5rem;
  margin-bottom: 0.5rem;
}

.faction-header strong {
  color: #8b0000;
  font-size: 1.1rem;
}

.faction-header i.fa-crown {
  color: #d4af37;
}

.faction-details {
  font-size: 0.95rem;
  color: #444;
}

.faction-details p {
  margin: 0.25rem 0;
}

.faction-details strong {
  color: #8b0000;
}

/* Zones Grid */
.zones-grid {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
  gap: 0.75rem;
  padding: 0.75rem;
}

.zone-card {
  background: var(--dungeon-sand-light);
  border: 1px solid var(--dungeon-stone-light);
  border-radius: 4px;
  padding: 0.75rem;
}

.zone-name {
  margin: 0 0 0.5rem 0;
  font-size: 1rem;
  color: var(--dungeon-stone-dark);
}

.zone-purpose {
  margin: 0 0 0.25rem 0;
  font-size: 0.9rem;
  color: #333;
}

.zone-atmosphere {
  margin: 0;
  font-size: 0.85rem;
  color: #666;
}

/* Rooms List */
.rooms-list {
  display: flex;
  flex-direction: column;
  gap: 0.75rem;
  padding: 0.75rem;
}

.room-card {
  background: var(--dungeon-sand-light);
  border: 1px solid var(--dungeon-stone-light);
  border-radius: 4px;
  overflow: hidden;
}

.room-card.boss-room {
  border: 2px solid var(--dungeon-boss-red);
  background: linear-gradient(135deg, #fff5f5 0%, var(--dungeon-sand-light) 100%);
}

.room-header {
  display: flex;
  align-items: center;
  gap: 0.5rem;
  padding: 0.5rem 0.75rem;
  background: var(--dungeon-stone-light);
  color: white;
}

.room-card.boss-room .room-header {
  background: var(--dungeon-boss-red);
}

.room-number {
  background: var(--dungeon-stone-dark);
  color: white;
  width: 1.8rem;
  height: 1.8rem;
  display: flex;
  align-items: center;
  justify-content: center;
  border-radius: 50%;
  font-weight: bold;
  font-size: 0.9rem;
}

.room-card.boss-room .room-number {
  background: #5c0000;
}

.room-name {
  margin: 0;
  font-size: 1rem;
  flex: 1;
}

.boss-badge {
  background: var(--dungeon-gold);
  color: #000;
  padding: 0.2rem 0.5rem;
  border-radius: 3px;
  font-weight: bold;
  font-size: 0.85rem;
}

.room-description {
  padding: 0.5rem 0.75rem;
  margin: 0;
  font-size: 0.9rem;
  line-height: 1.4;
  color: #333;
  border-bottom: 1px solid rgba(0,0,0,0.1);
}

.room-connections {
  padding: 0.5rem 0.75rem;
  margin: 0;
  font-size: 0.9rem;
  color: var(--dungeon-stone-dark);
  background: rgba(0,0,0,0.03);
}

.room-connections i {
  color: var(--dungeon-torch);
  margin-right: 0.25rem;
}

.room-terrain {
  padding: 0.5rem 0.75rem;
  font-size: 0.9rem;
}

.room-terrain ul {
  margin: 0.25rem 0 0 1.25rem;
  padding: 0;
}

.room-terrain li {
  margin-bottom: 0.25rem;
}

/* Trap Details Container */
.trap-details-container {
  background: rgba(231, 76, 60, 0.1);
  border-left: 4px solid #e74c3c;
  padding: 0.75rem;
  margin: 0.5rem 0;
}

.trap-hazard-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: 0.5rem;
  flex-wrap: wrap;
  gap: 0.5rem;
}

.trap-hazard-header strong {
  color: #c0392b;
  font-size: 1rem;
}

.trap-hazard-header i.fa-exclamation-triangle {
  margin-right: 0.25rem;
  color: #e74c3c;
}

.trap-stats {
  background: #e74c3c;
  color: white;
  padding: 0.15rem 0.5rem;
  border-radius: 12px;
  font-size: 0.8rem;
  font-weight: bold;
}

.trap-description {
  background: rgba(255, 255, 255, 0.7);
  padding: 0.5rem;
  border-radius: 4px;
  margin-bottom: 0.5rem;
}

.trap-description strong {
  color: #c0392b;
  display: block;
  margin-bottom: 0.25rem;
}

.trap-description p {
  margin: 0;
  font-style: italic;
}

.trap-tactics {
  background: rgba(241, 196, 15, 0.2);
  border: 1px solid rgba(241, 196, 15, 0.5);
  padding: 0.5rem;
  border-radius: 4px;
  margin-bottom: 0.5rem;
}

.trap-tactics strong {
  color: #d68910;
  display: block;
  margin-bottom: 0.25rem;
}

.trap-tactics i.fa-chess {
  margin-right: 0.25rem;
}

.trap-tactics p {
  margin: 0;
  white-space: pre-wrap;
}

.trap-stats-block {
  background: rgba(255, 255, 255, 0.5);
  padding: 0.5rem;
  border-radius: 4px;
  font-size: 0.85rem;
}

.trap-stats-block strong {
  color: #c0392b;
  display: block;
  margin-bottom: 0.25rem;
}

.trap-stats-block ul {
  margin: 0;
  padding-left: 1.25rem;
}

.trap-stats-block li {
  margin-bottom: 0.15rem;
}

/* Combat Prompt Container */
.combat-prompt-container {
  background: #f8f9fa;
  border-top: 1px solid rgba(0,0,0,0.1);
  padding: 0.75rem;
}

.combat-prompt-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: 0.5rem;
}

.combat-prompt-header strong {
  color: var(--eb-red);
  font-size: 0.9rem;
}

.combat-prompt-header i.fa-swords {
  margin-right: 0.25rem;
}

.copy-prompt-btn {
  background: var(--dungeon-stone-medium);
  color: white;
  border: none;
  padding: 0.35rem 0.75rem;
  border-radius: 4px;
  cursor: pointer;
  font-size: 0.8rem;
  display: flex;
  align-items: center;
  gap: 0.35rem;
  transition: all 0.2s;
}

.copy-prompt-btn:hover {
  background: var(--dungeon-stone-dark);
}

.combat-prompt {
  margin: 0;
  padding: 0.75rem;
  background: #fff;
  border: 1px solid var(--dungeon-stone-light);
  border-radius: 4px;
  font-family: 'Courier New', Courier, monospace;
  font-size: 0.85rem;
  line-height: 1.4;
  white-space: pre-wrap;
  word-wrap: break-word;
  max-height: 150px;
  overflow-y: auto;
  color: #333;
}

/* Room Secret */
.room-secret {
  background: rgba(212, 175, 55, 0.15);
  border-left: 3px solid var(--dungeon-gold);
  padding: 0.5rem 0.75rem;
  margin: 0;
  font-size: 0.9rem;
}

.room-secret strong {
  color: #b8860b;
}

.room-secret p {
  margin: 0.25rem 0 0 0;
}

/* Secrets List */
.secrets-list {
  list-style: none;
  margin: 0;
  padding: 0.75rem;
}

.secret-item {
  display: flex;
  align-items: flex-start;
  gap: 0.75rem;
  padding: 0.5rem 0;
  border-bottom: 1px dashed var(--dungeon-stone-light);
}

.secret-item:last-child {
  border-bottom: none;
}

.secret-dc {
  background: var(--dungeon-gold);
  color: #000;
  padding: 0.2rem 0.5rem;
  border-radius: 3px;
  font-weight: bold;
  font-size: 0.8rem;
  white-space: nowrap;
}

.secret-description {
  flex: 1;
  font-size: 0.9rem;
  color: #333;
}

/* Lore List */
.lore-list {
  list-style: none;
  margin: 0;
  padding: 0.75rem;
}

.lore-item {
  padding: 0.5rem 0;
  padding-left: 1.5rem;
  border-bottom: 1px dashed var(--dungeon-stone-light);
  position: relative;
  font-size: 0.9rem;
  line-height: 1.4;
}

.lore-item:last-child {
  border-bottom: none;
}

.lore-item::before {
  content: 'ðŸ“œ';
  position: absolute;
  left: 0;
  top: 0.4rem;
}

/* Boss Section */
.boss-section {
  border-left: 4px solid var(--dungeon-boss-red);
  background: rgba(139, 0, 0, 0.05);
}

.boss-section .boss-name {
  margin: 0 0 0.5rem 0;
  color: var(--dungeon-boss-red);
  font-size: 1.1rem;
}

.boss-section .boss-name i {
  color: var(--dungeon-gold);
  margin-right: 0.5rem;
}

.boss-section .boss-description {
  margin: 0 0 0.75rem 0;
  font-size: 0.95rem;
  line-height: 1.5;
}

/* Summary */
.dungeon-summary {
  margin: 0;
  padding: 0.75rem;
  font-size: 0.95rem;
  line-height: 1.5;
  color: #333;
  font-style: italic;
  background: var(--dungeon-sand-light);
  border-radius: 4px;
}

/* Dungeon Footer */
.dungeon-footer {
  display: flex;
  gap: 0.5rem;
  justify-content: center;
  padding: 1rem;
  margin-top: auto;
  background: #f5f5f5;
  border-top: 1px solid #ddd;
}

.dungeon-footer button {
  padding: 0.5rem 1rem;
  border: none;
  border-radius: 4px;
  cursor: pointer;
  font-size: 0.9rem;
  display: flex;
  align-items: center;
  gap: 0.5rem;
  transition: all 0.2s;
}

.dungeon-footer .regenerate-btn {
  background: var(--dungeon-stone-light);
  color: white;
}

.dungeon-footer .regenerate-btn:hover {
  background: var(--dungeon-stone-medium);
}

.dungeon-footer .save-journal-btn {
  background: var(--dungeon-stone-dark);
  color: white;
}

.dungeon-footer .save-journal-btn:hover {
  background: #1a252f;
}

/* ============================================================================
   DUNGEON NODE MAP
   ============================================================================ */

.map-section {
  background: #fff;
}

.dungeon-map-container {
  padding: 0.75rem;
  background: linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%);
  border-radius: 4px;
}

.dungeon-map {
  width: 100%;
  display: block;
  background: #fff;
  border: 1px solid var(--dungeon-stone-light);
  border-radius: 4px;
}

.map-node {
  transition: transform 0.2s ease;
}

.map-node:hover circle {
  stroke-width: 4;
  filter: brightness(1.1);
}

/* Map Legend */
.map-legend {
  display: flex;
  flex-wrap: wrap;
  gap: 0.75rem;
  justify-content: center;
  margin-top: 0.75rem;
  padding: 0.5rem;
  background: rgba(0,0,0,0.03);
  border-radius: 4px;
}

.legend-item {
  display: flex;
  align-items: center;
  gap: 0.35rem;
  font-size: 0.8rem;
  color: #555;
}

.legend-node {
  width: 14px;
  height: 14px;
  border-radius: 50%;
  border: 2px solid #2c3e50;
}

.legend-node.entry { background: #4a90d9; }
.legend-node.combat { background: #d9534f; }
.legend-node.lore { background: #9b59b6; }
.legend-node.transition { background: #95a5a6; }
.legend-node.puzzle { background: #f39c12; }
.legend-node.treasure { background: #f1c40f; }
.legend-node.boss { background: #8b0000; }

/* ============================================================================
   ROOM TYPE BADGES & STYLING
   ============================================================================ */

.room-type-badge {
  padding: 0.2rem 0.6rem;
  border-radius: 3px;
  font-size: 0.8rem;
  font-weight: bold;
  white-space: nowrap;
}

.room-type-badge.room-entry {
  background: #4a90d9;
  color: white;
}

.room-type-badge.room-combat {
  background: #d9534f;
  color: white;
}

.room-type-badge.room-lore {
  background: #9b59b6;
  color: white;
}

.room-type-badge.room-transition {
  background: #95a5a6;
  color: white;
}

.room-type-badge.room-puzzle {
  background: #f39c12;
  color: white;
}

.room-type-badge.room-trap {
  background: #e74c3c;
  color: white;
}

.room-type-badge.room-rest {
  background: #27ae60;
  color: white;
}

.room-type-badge.room-treasure {
  background: #f1c40f;
  color: #333;
}

.room-type-badge.room-boss {
  background: var(--dungeon-gold);
  color: #000;
}

/* Room card type-specific borders */
.room-card.room-lore {
  border-left: 4px solid #9b59b6;
}

.room-card.room-transition {
  border-left: 4px solid #95a5a6;
  background: linear-gradient(135deg, #fafafa 0%, var(--dungeon-sand-light) 100%);
}

.room-card.room-puzzle {
  border-left: 4px solid #f39c12;
}

.room-card.room-rest {
  border-left: 4px solid #27ae60;
  background: linear-gradient(135deg, #f0fff0 0%, var(--dungeon-sand-light) 100%);
}

.room-card.room-treasure {
  border-left: 4px solid #f1c40f;
  background: linear-gradient(135deg, #fffef0 0%, var(--dungeon-sand-light) 100%);
}

/* Lore Content Styling */
.room-lore-content {
  background: rgba(155, 89, 182, 0.1);
  border-left: 3px solid #9b59b6;
  padding: 0.5rem 0.75rem;
  margin: 0;
  font-size: 0.9rem;
}

.room-lore-content strong {
  color: #9b59b6;
}

.room-lore-content p {
  margin: 0.25rem 0 0 0;
  line-height: 1.4;
}

/* Transition Note Styling */
.room-transition-note {
  background: rgba(149, 165, 166, 0.1);
  border-left: 3px solid #95a5a6;
  padding: 0.5rem 0.75rem;
  margin: 0;
  font-size: 0.9rem;
  color: #555;
}

.room-transition-note i {
  margin-right: 0.25rem;
}

/* Room Card Highlight (when clicked in map) */
.room-card.highlight {
  animation: roomHighlight 2s ease-out;
}

@keyframes roomHighlight {
  0% {
    box-shadow: 0 0 0 3px var(--dungeon-gold);
    transform: scale(1.01);
  }
  100% {
    box-shadow: none;
    transform: scale(1);
  }
}

/* ============================================================================
   INFILTRATION OUTPUT STYLES
   ============================================================================ */

/* Infiltration-specific color palette - dark stealth/shadow theme */
:root {
  --infiltration-purple-dark: #1a1a2e;
  --infiltration-purple-medium: #16213e;
  --infiltration-purple-light: #0f3460;
  --infiltration-accent: #e94560;
  --infiltration-shadow-light: #eaeef3;
  --infiltration-gold: #ffc947;
}

.infiltration-encounter-output {
  padding: 0.5rem;
  min-height: 500px;
  display: flex;
  flex-direction: column;
}

/* Infiltration Header */
.infiltration-header {
  text-align: center;
  margin-bottom: 1rem;
  padding: 1rem;
  background: linear-gradient(135deg, var(--infiltration-purple-dark), var(--infiltration-purple-medium));
  border-radius: 4px;
  color: white;
}

.infiltration-header .infiltration-title {
  margin: 0;
  font-size: 1.5rem;
  text-shadow: 1px 1px 3px rgba(0,0,0,0.5);
}

.infiltration-header .infiltration-meta {
  display: flex;
  justify-content: center;
  gap: 1rem;
  margin-top: 0.5rem;
  flex-wrap: wrap;
}

.infiltration-type-badge {
  background: var(--infiltration-accent);
  padding: 0.25rem 0.75rem;
  border-radius: 4px;
  font-size: 0.9rem;
  font-weight: bold;
}

.infiltration-complexity {
  background: rgba(255,255,255,0.2);
  padding: 0.25rem 0.75rem;
  border-radius: 4px;
  font-size: 0.9rem;
}

.infiltration-location {
  opacity: 0.9;
  font-size: 0.9rem;
}

/* Infiltration Sections */
.infiltration-section {
  margin-bottom: 1rem;
  background: #fff;
  border: 2px solid var(--infiltration-purple-light);
  border-radius: 4px;
}

.infiltration-section h2 {
  margin: 0;
  padding: 0.5rem 0.75rem;
  background: var(--infiltration-purple-light);
  color: white;
  font-size: 1rem;
  font-weight: bold;
  display: flex;
  align-items: center;
}

.infiltration-section h2 i {
  margin-right: 0.5rem;
}

.infiltration-section > *:not(h2) {
  padding: 0.75rem;
}

.infiltration-section .section-hint {
  margin: 0;
  padding: 0.5rem 0.75rem;
  background: var(--infiltration-shadow-light);
  font-size: 0.85rem;
  color: var(--infiltration-purple-dark);
  font-style: italic;
  border-bottom: 1px solid rgba(0,0,0,0.1);
}

/* Objectives Section */
.objectives-section {
  border-left: 4px solid var(--infiltration-gold);
}

.objectives-list {
  list-style: none;
  margin: 0;
  padding: 0.75rem;
}

.objective-item {
  display: flex;
  align-items: flex-start;
  gap: 0.75rem;
  padding: 0.5rem 0;
  border-bottom: 1px dashed var(--infiltration-purple-light);
}

.objective-item:last-child {
  border-bottom: none;
}

.objective-ip {
  background: var(--infiltration-gold);
  color: #000;
  padding: 0.2rem 0.5rem;
  border-radius: 3px;
  font-weight: bold;
  font-size: 0.85rem;
  white-space: nowrap;
}

.objective-description {
  flex: 1;
  font-size: 0.95rem;
  line-height: 1.4;
}

/* Obstacles Section */
.obstacles-section .obstacles-grid {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(320px, 1fr));
  gap: 0.75rem;
  padding: 0.75rem;
}

.obstacles-section .obstacle-card {
  background: var(--infiltration-shadow-light);
  border: 1px solid var(--infiltration-purple-light);
  border-radius: 4px;
  overflow: hidden;
}

.obstacles-section .obstacle-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: 0.5rem 0.75rem;
  background: var(--infiltration-purple-medium);
  color: white;
}

.obstacle-name {
  margin: 0;
  font-size: 1rem;
  font-weight: bold;
}

.obstacle-ip-badge {
  background: var(--infiltration-gold);
  color: #000;
  padding: 0.2rem 0.5rem;
  border-radius: 3px;
  font-weight: bold;
  font-size: 0.8rem;
}

.obstacle-type-badge {
  background: rgba(255,255,255,0.2);
  padding: 0.15rem 0.4rem;
  border-radius: 3px;
  font-size: 0.75rem;
  text-transform: uppercase;
}

.obstacles-section .obstacle-description {
  padding: 0.5rem 0.75rem;
  margin: 0;
  font-size: 0.9rem;
  line-height: 1.4;
  color: #333;
  border-bottom: 1px solid rgba(0,0,0,0.1);
}

.obstacle-skills-table {
  width: 100%;
  border-collapse: collapse;
  font-size: 0.85rem;
  background: #fff;
}

.obstacle-skills-table thead {
  background: var(--infiltration-purple-light);
  color: white;
}

.obstacle-skills-table th,
.obstacle-skills-table td {
  padding: 0.4rem 0.5rem;
  text-align: left;
  border-bottom: 1px solid var(--infiltration-shadow-light);
}

.obstacle-skills-table th {
  font-weight: 600;
}

.obstacle-skills-table .skill-name {
  font-weight: bold;
  color: var(--infiltration-purple-dark);
}

.obstacle-skills-table .skill-dc {
  font-weight: bold;
  text-align: center;
}

/* Awareness Section */
.awareness-section {
  border-left: 4px solid var(--infiltration-accent);
}

.awareness-section h2 {
  background: var(--infiltration-accent);
}

.awareness-thresholds {
  list-style: none;
  margin: 0;
  padding: 0.75rem;
}

.awareness-threshold {
  display: flex;
  align-items: center;
  gap: 0.75rem;
  padding: 0.5rem 0;
  border-bottom: 1px dashed var(--infiltration-purple-light);
}

.awareness-threshold:last-child {
  border-bottom: none;
}

.threshold-ap {
  background: var(--infiltration-accent);
  color: white;
  padding: 0.25rem 0.6rem;
  border-radius: 4px;
  font-weight: bold;
  font-size: 0.9rem;
  min-width: 50px;
  text-align: center;
}

.threshold-effect {
  flex: 1;
  font-size: 0.95rem;
}

.threshold-effect.critical {
  color: var(--infiltration-accent);
  font-weight: bold;
}

/* Complications Section */
.complications-section {
  border-left: 4px solid #fd7e14;
}

.complications-section h2 {
  background: #fd7e14;
}

.infiltration-complications-list {
  list-style: none;
  margin: 0;
  padding: 0.75rem;
}

.complication-card {
  background: rgba(253, 126, 20, 0.1);
  border: 1px solid rgba(253, 126, 20, 0.3);
  border-radius: 4px;
  padding: 0.75rem;
  margin-bottom: 0.5rem;
}

.complication-card:last-child {
  margin-bottom: 0;
}

.complication-name {
  margin: 0 0 0.5rem 0;
  font-size: 1rem;
  font-weight: bold;
  color: #fd7e14;
}

.complication-trigger {
  font-size: 0.9rem;
  color: #666;
  margin-bottom: 0.5rem;
  font-style: italic;
}

.complication-trigger strong {
  color: #333;
}

.complication-overcome {
  font-size: 0.9rem;
  margin-bottom: 0.5rem;
}

.complication-outcomes {
  font-size: 0.85rem;
  padding-left: 1rem;
  border-left: 2px solid rgba(253, 126, 20, 0.3);
}

.complication-outcomes p {
  margin: 0.25rem 0;
}

.complication-outcomes .success {
  color: #28a745;
}

.complication-outcomes .failure {
  color: #dc3545;
}

/* Opportunities Section */
.opportunities-section {
  border-left: 4px solid #17a2b8;
}

.opportunities-section h2 {
  background: #17a2b8;
}

.infiltration-opportunities-list {
  list-style: none;
  margin: 0;
  padding: 0.75rem;
}

.opportunity-card {
  background: rgba(23, 162, 184, 0.1);
  border: 1px solid rgba(23, 162, 184, 0.3);
  border-radius: 4px;
  padding: 0.75rem;
  margin-bottom: 0.5rem;
}

.opportunity-card:last-child {
  margin-bottom: 0;
}

.opportunity-name {
  margin: 0 0 0.5rem 0;
  font-size: 1rem;
  font-weight: bold;
  color: #17a2b8;
}

.opportunity-requirements {
  font-size: 0.9rem;
  color: #666;
  margin-bottom: 0.5rem;
  font-style: italic;
}

.opportunity-requirements strong {
  color: #333;
}

.opportunity-effect {
  font-size: 0.9rem;
  color: #333;
}

/* Preparation Section */
.preparation-section {
  border-left: 4px solid #6f42c1;
}

.preparation-section h2 {
  background: #6f42c1;
}

.preparation-grid {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
  gap: 0.75rem;
  padding: 0.75rem;
}

.preparation-card {
  background: rgba(111, 66, 193, 0.1);
  border: 1px solid rgba(111, 66, 193, 0.3);
  border-radius: 4px;
  overflow: hidden;
}

.preparation-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: 0.5rem 0.75rem;
  background: rgba(111, 66, 193, 0.2);
}

.preparation-name {
  margin: 0;
  font-size: 0.95rem;
  font-weight: bold;
  color: #6f42c1;
}

.preparation-traits {
  display: flex;
  gap: 0.25rem;
}

.preparation-trait {
  background: #6f42c1;
  color: white;
  padding: 0.1rem 0.35rem;
  border-radius: 3px;
  font-size: 0.7rem;
  text-transform: uppercase;
}

.preparation-content {
  padding: 0.5rem 0.75rem;
}

.preparation-check {
  font-size: 0.9rem;
  margin-bottom: 0.5rem;
}

.preparation-check strong {
  color: #6f42c1;
}

.preparation-outcomes {
  font-size: 0.85rem;
  padding-left: 0.75rem;
  border-left: 2px solid rgba(111, 66, 193, 0.3);
}

.preparation-outcomes p {
  margin: 0.2rem 0;
}

.preparation-outcomes .success {
  color: #28a745;
}

.preparation-outcomes .failure {
  color: #dc3545;
}

/* Edge Points Section */
.edge-section {
  border-left: 4px solid var(--infiltration-gold);
}

.edge-section h2 {
  background: #b8860b;
}

.edge-points-info {
  background: rgba(255, 201, 71, 0.15);
  padding: 0.75rem;
  border-radius: 4px;
}

.edge-points-info p {
  margin: 0 0 0.5rem 0;
  font-size: 0.95rem;
  line-height: 1.5;
}

.edge-points-info p:last-child {
  margin-bottom: 0;
}

.edge-usage-list {
  list-style: none;
  margin: 0.5rem 0 0 0;
  padding: 0;
}

.edge-usage-list li {
  padding: 0.3rem 0;
  padding-left: 1.5rem;
  position: relative;
  font-size: 0.9rem;
}

.edge-usage-list li::before {
  content: "ðŸª™";
  position: absolute;
  left: 0;
}

/* Failure Section */
.failure-section {
  border-left: 4px solid #dc3545;
}

.failure-section h2 {
  background: #dc3545;
}

.failure-content {
  background: rgba(220, 53, 69, 0.1);
  padding: 0.75rem;
  border-radius: 4px;
}

.failure-content p {
  margin: 0 0 0.5rem 0;
  font-size: 0.95rem;
  line-height: 1.5;
  color: #721c24;
}

.failure-content p:last-child {
  margin-bottom: 0;
}

/* Infiltration Footer */
.infiltration-footer {
  display: flex;
  gap: 0.5rem;
  justify-content: center;
  padding: 1rem;
  margin-top: auto;
  background: #f5f5f5;
  border-top: 1px solid #ddd;
}

.infiltration-footer button {
  padding: 0.5rem 1rem;
  border: none;
  border-radius: 4px;
  cursor: pointer;
  font-size: 0.9rem;
  display: flex;
  align-items: center;
  gap: 0.5rem;
  transition: all 0.2s;
}

.infiltration-footer .regenerate-btn {
  background: var(--infiltration-purple-light);
  color: white;
}

.infiltration-footer .regenerate-btn:hover {
  background: var(--infiltration-purple-medium);
}

.infiltration-footer .save-btn {
  background: var(--infiltration-purple-dark);
  color: white;
}

.infiltration-footer .save-btn:hover {
  background: #0d0d1a;
}

/* =============================================================================
   LAIR ENCOUNTER OUTPUT STYLES
   Boss encounters with Lair Actions, scenic descriptions, and double HP
   ============================================================================= */

/* Lair Color Palette - Dark, Menacing Boss Theme */
:root {
  --lair-blood-dark: #4a0e0e;
  --lair-blood-medium: #8b0000;
  --lair-blood-light: #c41e3a;
  --lair-shadow-dark: #1a0a0a;
  --lair-shadow-medium: #2a1a1a;
  --lair-bone: #f0e6d3;
  --lair-gold: #d4af37;
  --lair-hp-red: #ff4444;
}

/* Main Container */
.lair-encounter-output {
  font-family: var(--font-primary, 'Signika', sans-serif);
  background: linear-gradient(180deg, var(--lair-shadow-dark) 0%, #0d0505 100%);
  color: var(--lair-bone);
  padding: 0;
  display: flex;
  flex-direction: column;
  min-height: 100%;
}

/* Lair Header */
.lair-header {
  background: linear-gradient(135deg, var(--lair-blood-dark) 0%, var(--lair-shadow-dark) 100%);
  padding: 1rem 1.5rem;
  border-bottom: 3px solid var(--lair-blood-medium);
}

.lair-header h1 {
  margin: 0;
  font-size: 1.75rem;
  color: var(--lair-gold);
  text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.8);
  display: flex;
  align-items: center;
  gap: 0.75rem;
}

.lair-header h1 i {
  color: var(--lair-blood-light);
}

.lair-header .boss-level {
  font-size: 1rem;
  color: var(--lair-bone);
  opacity: 0.8;
  margin-left: auto;
  font-weight: normal;
}

/* Lair Meta Tags */
.lair-meta {
  display: flex;
  flex-wrap: wrap;
  gap: 0.5rem;
  margin-top: 0.5rem;
}

.lair-meta span {
  background: rgba(139, 0, 0, 0.4);
  border: 1px solid var(--lair-blood-medium);
  color: var(--lair-bone);
  padding: 0.25rem 0.6rem;
  border-radius: 4px;
  font-size: 0.85rem;
}

.lair-meta .lair-level {
  background: linear-gradient(135deg, var(--lair-blood-dark) 0%, var(--lair-blood-medium) 100%);
  font-weight: bold;
  color: var(--lair-gold);
}

.lair-meta .lair-difficulty {
  background: linear-gradient(135deg, #4a0000 0%, #8b0000 100%);
  color: #ff6666;
}

/* Section Base */
.lair-section {
  margin: 0.75rem;
  background: rgba(42, 26, 26, 0.9);
  border: 2px solid var(--lair-blood-dark);
  border-radius: 6px;
  overflow: visible;
}

/* Section Content - no max-height, window scrolls instead */
.lair-section .section-content {
  padding: 1rem;
}

/* Custom scrollbar for lair sections */
.lair-section .section-content::-webkit-scrollbar {
  width: 8px;
}

.lair-section .section-content::-webkit-scrollbar-track {
  background: var(--lair-shadow-dark);
}

.lair-section .section-content::-webkit-scrollbar-thumb {
  background: var(--lair-blood-medium);
  border-radius: 4px;
}

.lair-section .section-content::-webkit-scrollbar-thumb:hover {
  background: var(--lair-blood-light);
}

.lair-section h2 {
  margin: 0;
  padding: 0.6rem 1rem;
  background: linear-gradient(90deg, var(--lair-blood-dark) 0%, var(--lair-shadow-medium) 100%);
  color: var(--lair-gold);
  font-size: 1.1rem;
  font-weight: bold;
  display: flex;
  align-items: center;
  border-bottom: 1px solid var(--lair-blood-medium);
}

.lair-section h2 i {
  margin-right: 0.5rem;
  color: var(--lair-blood-light);
}

/* Scenic Description Section */
.scenic-section .scene-block {
  margin-bottom: 1rem;
  padding-bottom: 1rem;
  border-bottom: 1px solid rgba(139, 0, 0, 0.3);
}

.scenic-section .scene-block:last-child {
  margin-bottom: 0;
  padding-bottom: 0;
  border-bottom: none;
}

.scenic-section h3 {
  margin: 0 0 0.5rem 0;
  font-size: 1rem;
  color: var(--lair-gold);
  display: flex;
  align-items: center;
  gap: 0.5rem;
}

.scenic-section h3 i {
  color: var(--lair-blood-light);
  font-size: 0.9rem;
}

.scenic-section p {
  margin: 0;
  line-height: 1.6;
  color: var(--lair-bone);
}

/* Combined scene description */
.scenic-section .scene-description p {
  margin-bottom: 1rem;
}

.scenic-section .scene-description p:last-child {
  margin-bottom: 0;
}

/* Boss Stats Section - Description + HP */
.boss-stats-section .boss-description {
  margin-bottom: 1rem;
}

.boss-stats-section .boss-description p {
  margin: 0;
  line-height: 1.6;
  color: var(--lair-bone);
  font-style: italic;
}

.boss-stats-section .boss-hp {
  display: flex;
  align-items: baseline;
  gap: 0.5rem;
  padding: 0.75rem;
  background: rgba(74, 14, 14, 0.4);
  border-left: 4px solid var(--lair-hp-red);
  border-radius: 0 4px 4px 0;
}

.boss-stats-section .hp-label {
  font-size: 0.85rem;
  color: var(--lair-gold);
  text-transform: uppercase;
  font-weight: bold;
}

.boss-stats-section .hp-value {
  font-size: 1.5rem;
  font-weight: bold;
  color: var(--lair-hp-red);
}

.boss-stats-section .hp-note {
  font-size: 0.85rem;
  color: var(--lair-bone);
  opacity: 0.7;
}

/* Legacy styles - keeping for compatibility */
.boss-stats-section .traits-list {
  display: flex;
  flex-wrap: wrap;
  gap: 0.4rem;
  margin-top: 0.75rem;
}

.boss-stats-section .trait-tag {
  background: var(--lair-blood-dark);
  color: var(--lair-bone);
  padding: 0.2rem 0.5rem;
  border-radius: 3px;
  font-size: 0.8rem;
  border: 1px solid var(--lair-blood-medium);
}

/* Minion Stats Section */
.minion-stats-section .minion-block {
  background: rgba(42, 26, 26, 0.7);
  border: 1px dashed var(--lair-blood-dark);
  border-radius: 4px;
  padding: 0.75rem;
}

.minion-stats-section .minion-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: 0.5rem;
}

.minion-stats-section .minion-name {
  font-weight: bold;
  color: var(--lair-gold);
}

.minion-stats-section .minion-rule {
  font-size: 0.85rem;
  color: var(--lair-hp-red);
  font-style: italic;
}

.minion-stats-section .minion-stats {
  font-size: 0.9rem;
  color: var(--lair-bone);
  opacity: 0.9;
}

/* Lair Actions Section */
.lair-actions-section .lair-action {
  background: linear-gradient(135deg, rgba(139, 0, 0, 0.15) 0%, rgba(26, 10, 10, 0.3) 100%);
  border-left: 4px solid var(--lair-blood-medium);
  margin-bottom: 0.75rem;
  padding: 0.75rem 1rem;
  border-radius: 0 4px 4px 0;
}

.lair-actions-section .lair-action:last-child {
  margin-bottom: 0;
}

.lair-actions-section .action-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: 0.5rem;
}

.lair-actions-section .action-name {
  font-weight: bold;
  font-size: 1.05rem;
  color: var(--lair-gold);
}

.lair-actions-section .action-cost {
  display: flex;
  gap: 3px;
}

.lair-actions-section .action-cost i {
  color: var(--lair-blood-light);
  font-size: 0.9rem;
}

.lair-actions-section .action-trigger {
  font-size: 0.85rem;
  color: var(--lair-blood-light);
  font-style: italic;
  margin-bottom: 0.4rem;
}

.lair-actions-section .action-description {
  font-size: 0.95rem;
  color: var(--lair-bone);
  line-height: 1.5;
  margin-bottom: 0.4rem;
}

.lair-actions-section .action-mechanics {
  background: rgba(0, 0, 0, 0.3);
  padding: 0.4rem 0.6rem;
  border-radius: 3px;
  font-size: 0.9rem;
  color: var(--lair-hp-red);
  font-family: monospace;
}

/* New Lair Action Styles (PF2E ability format) */
.lair-actions-section .pf2e-ability {
  position: relative;
}

.lair-actions-section .ability-header {
  display: flex;
  align-items: center;
  gap: 0.5rem;
  margin-bottom: 0.5rem;
  flex-wrap: wrap;
}

.lair-actions-section .ability-name {
  margin: 0;
  font-size: 1.1rem;
  font-weight: bold;
  color: var(--lair-gold);
}

.lair-actions-section .action-glyph {
  color: var(--lair-blood-light);
  font-size: 1rem;
  letter-spacing: 2px;
}

.lair-actions-section .recharge-badge {
  background: linear-gradient(135deg, #4a0080 0%, #6b1ab3 100%);
  color: #fff;
  padding: 0.2rem 0.5rem;
  border-radius: 3px;
  font-size: 0.75rem;
  font-weight: bold;
  text-transform: uppercase;
  margin-left: auto;
}

.lair-actions-section .ability-traits {
  display: flex;
  flex-wrap: wrap;
  gap: 0.3rem;
  margin-bottom: 0.5rem;
}

.lair-actions-section .ability-traits .trait {
  background: rgba(139, 69, 19, 0.6);
  color: var(--lair-bone);
  padding: 0.15rem 0.4rem;
  border-radius: 3px;
  font-size: 0.7rem;
  text-transform: lowercase;
  border: 1px solid rgba(139, 69, 19, 0.8);
}

.lair-actions-section .ability-content {
  font-size: 0.95rem;
  color: var(--lair-bone);
  line-height: 1.5;
}

.lair-actions-section .ability-content p {
  margin: 0.3rem 0;
}

.lair-actions-section .ability-desc {
  font-style: italic;
  color: var(--lair-bone-dim, #a09080);
}

/* Lair Action Buttons */
.lair-actions-section .post-to-chat,
.lair-actions-section .roll-recharge {
  display: inline-flex;
  align-items: center;
  gap: 0.4rem;
  padding: 0.35rem 0.6rem;
  margin-top: 0.5rem;
  margin-right: 0.5rem;
  border: none;
  border-radius: 3px;
  font-size: 0.8rem;
  cursor: pointer;
  transition: all 0.2s;
}

.lair-actions-section .post-to-chat {
  background: var(--lair-blood-dark);
  color: var(--lair-bone);
  border: 1px solid var(--lair-blood-medium);
}

.lair-actions-section .post-to-chat:hover {
  background: var(--lair-blood-medium);
  transform: translateY(-1px);
}

.lair-actions-section .roll-recharge {
  background: linear-gradient(135deg, #4a0080 0%, #6b1ab3 100%);
  color: #fff;
  border: 1px solid #8b2ae3;
}

.lair-actions-section .roll-recharge:hover {
  background: linear-gradient(135deg, #5a0090 0%, #7b2ac3 100%);
  transform: translateY(-1px);
}

/* Recharge Chat Messages */
.recharge-success {
  background: linear-gradient(135deg, rgba(139, 0, 0, 0.3) 0%, rgba(74, 0, 128, 0.3) 100%);
  border-left: 4px solid #d4af37;
  padding: 0.75rem 1rem;
  border-radius: 0 4px 4px 0;
}

.recharge-success .recharge-flavor {
  margin: 0;
  font-style: italic;
  font-size: 1rem;
  color: #f5e6d3;
  line-height: 1.5;
}

.recharge-fail {
  background: rgba(60, 60, 60, 0.3);
  padding: 0.5rem 0.75rem;
  border-radius: 4px;
  font-size: 0.9rem;
  color: #999;
}

.recharge-fail i {
  margin-right: 0.3rem;
}

/* PF2E Ability Chat Message */
.pf2e-ability-chat {
  background: linear-gradient(135deg, rgba(139, 0, 0, 0.2) 0%, rgba(26, 10, 10, 0.4) 100%);
  border-left: 4px solid #d4af37;
  padding: 0.75rem 1rem;
  border-radius: 0 4px 4px 0;
}

.pf2e-ability-chat h3 {
  margin: 0 0 0.5rem 0;
  color: #191813;
  font-size: 1.1rem;
}

.pf2e-ability-chat .action-glyph {
  color: #dc143c;
  margin-left: 0.3rem;
}

.pf2e-ability-chat p {
  margin: 0.3rem 0;
  line-height: 1.5;
}

/* Tactics Section */
.tactics-section p {
  margin: 0;
  line-height: 1.6;
  color: var(--lair-bone);
}

.tactics-section strong {
  color: var(--lair-gold);
}

/* Lair Footer */
.lair-footer {
  display: flex;
  gap: 0.75rem;
  justify-content: center;
  padding: 1rem;
  margin-top: auto;
  background: linear-gradient(180deg, var(--lair-shadow-dark) 0%, #0a0505 100%);
  border-top: 2px solid var(--lair-blood-dark);
}

.lair-footer button {
  padding: 0.6rem 1.25rem;
  border: none;
  border-radius: 4px;
  cursor: pointer;
  font-size: 0.95rem;
  display: flex;
  align-items: center;
  gap: 0.5rem;
  transition: all 0.2s;
}

.lair-footer .save-journal-btn {
  background: var(--lair-gold);
  color: var(--lair-shadow-dark);
  font-weight: bold;
}

.lair-footer .save-journal-btn:hover {
  background: #e6c340;
  transform: translateY(-1px);
}

.lair-footer .regenerate-btn {
  background: var(--lair-blood-dark);
  color: var(--lair-bone);
  border: 1px solid var(--lair-blood-medium);
}

.lair-footer .regenerate-btn:hover {
  background: var(--lair-blood-medium);
  transform: translateY(-1px);
}

/* ============================================================================
   Travel Encounter Output - A Chance Meeting
   ============================================================================ */

:root {
  --travel-forest: #2d5016;
  --travel-forest-light: #4a7a2a;
  --travel-path: #8b7355;
  --travel-path-light: #a69076;
  --travel-sky: #87ceeb;
  --travel-parchment: #f5e6d3;
  --travel-parchment-dark: #d4c4a8;
  --travel-text: #3d2914;
}

.travel-encounter-output {
  padding: 1.5rem;
  background: linear-gradient(180deg, var(--travel-parchment) 0%, var(--travel-parchment-dark) 100%);
  min-height: 100%;
}

/* Header */
.travel-header {
  text-align: center;
  margin-bottom: 1.5rem;
  padding-bottom: 1rem;
  border-bottom: 2px solid var(--travel-path);
}

.travel-title {
  font-size: 1.8rem;
  color: var(--travel-forest);
  margin: 0 0 0.5rem 0;
  font-family: 'Modesto Condensed', 'Palatino Linotype', serif;
  text-shadow: 1px 1px 2px rgba(0,0,0,0.1);
}

.travel-meta {
  display: flex;
  justify-content: center;
  gap: 1rem;
  flex-wrap: wrap;
}

.travel-meta span {
  padding: 0.3rem 0.8rem;
  border-radius: 15px;
  font-size: 0.85rem;
  font-weight: 500;
}

.encounter-type-badge {
  background: var(--travel-forest);
  color: white;
}

.biome-badge {
  background: var(--travel-path);
  color: white;
}

/* Description Section */
.travel-description {
  background: rgba(255, 255, 255, 0.7);
  border: 1px solid var(--travel-path-light);
  border-radius: 8px;
  padding: 1.5rem;
  margin-bottom: 1.5rem;
  box-shadow: 0 2px 8px rgba(0,0,0,0.05);
}

.travel-description p {
  font-size: 1.1rem;
  line-height: 1.8;
  color: var(--travel-text);
  margin: 0;
  font-style: italic;
}

/* Campaign Metadata */
.campaign-metadata {
  background: rgba(92, 0, 0, 0.08);
  border: 1px solid var(--travel-path-light);
  border-left: 4px solid var(--travel-forest);
  border-radius: 4px;
  padding: 0.75rem 1rem;
  margin-bottom: 1rem;
  font-size: 0.85rem;
}

.campaign-metadata .metadata-row {
  display: flex;
  gap: 0.5rem;
  margin-bottom: 0.3rem;
}

.campaign-metadata .metadata-row:last-child {
  margin-bottom: 0;
}

.campaign-metadata .metadata-label {
  color: var(--travel-forest);
  font-weight: 600;
  min-width: 60px;
}

.campaign-metadata .metadata-value {
  color: var(--travel-text);
}

.campaign-metadata .metadata-value.standalone {
  color: #666;
}

.campaign-metadata .metadata-value.front_specific {
  color: #8b4513;
  font-weight: 500;
}

.campaign-metadata .metadata-value.personal {
  color: #2e7d32;
  font-weight: 500;
}

/* Footer */
.travel-footer {
  display: flex;
  justify-content: center;
  flex-wrap: wrap;
  gap: 0.75rem;
  padding-top: 1rem;
  border-top: 1px solid var(--travel-path-light);
}

.travel-footer button {
  padding: 0.6rem 1.2rem;
  border: none;
  border-radius: 4px;
  cursor: pointer;
  font-size: 0.95rem;
  display: flex;
  align-items: center;
  gap: 0.5rem;
  transition: all 0.2s;
}

.travel-footer .save-journal-btn {
  background: var(--travel-forest);
  color: white;
  font-weight: bold;
}

.travel-footer .save-journal-btn:hover {
  background: var(--travel-forest-light);
  transform: translateY(-1px);
}

.travel-footer .regenerate-btn {
  background: var(--travel-path);
  color: white;
  border: 1px solid var(--travel-path-light);
}

.travel-footer .regenerate-btn:hover {
  background: var(--travel-path-light);
  transform: translateY(-1px);
}

.travel-footer .back-to-builder-btn {
  background: #6c757d;
  color: white;
  border: 1px solid #5a6268;
}

.travel-footer .back-to-builder-btn:hover {
  background: #5a6268;
  transform: translateY(-1px);
}

/* =================================================
   SIMPLE COMBAT OUTPUT
   ================================================= */

.combat-encounter-output {
  padding: 1rem;
  font-family: var(--eb-font-body, 'Signika', sans-serif);
  color: var(--eb-text, #3e2723);
}

.combat-header {
  text-align: center;
  margin-bottom: 1.5rem;
  padding-bottom: 1rem;
  border-bottom: 2px solid var(--eb-tan, #d4a574);
}

.combat-header h2 {
  font-family: var(--eb-font-title, 'Modesto Condensed', serif);
  font-size: 2rem;
  color: var(--eb-brown-dark, #5d4e37);
  margin: 0 0 0.5rem 0;
}

.combat-meta {
  display: flex;
  justify-content: center;
  gap: 1rem;
  flex-wrap: wrap;
}

.combat-meta span {
  padding: 0.25rem 0.75rem;
  border-radius: 4px;
  font-size: 0.9rem;
}

.combat-meta .difficulty {
  background: var(--eb-tan, #d4a574);
  color: var(--eb-brown-dark, #5d4e37);
  font-weight: bold;
  text-transform: uppercase;
}

.combat-meta .difficulty-severe {
  background: #e74c3c;
  color: white;
}

.combat-meta .difficulty-extreme {
  background: #8e44ad;
  color: white;
}

.combat-meta .difficulty-moderate {
  background: #f39c12;
  color: white;
}

.combat-meta .xp-total {
  background: var(--eb-brown-dark, #5d4e37);
  color: white;
  font-weight: bold;
}

.combat-meta .party-info {
  background: rgba(0,0,0,0.1);
  color: var(--eb-text, #3e2723);
}

.combat-meta .objective-type {
  background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
  color: white;
  font-weight: bold;
  text-shadow: 0 1px 2px rgba(0,0,0,0.3);
}

.combat-section {
  margin-bottom: 1.5rem;
}

.combat-section h3 {
  font-family: var(--eb-font-title, 'Modesto Condensed', serif);
  font-size: 1.4rem;
  color: var(--eb-brown-dark, #5d4e37);
  border-bottom: 1px solid var(--eb-tan, #d4a574);
  padding-bottom: 0.5rem;
  margin-bottom: 0.75rem;
}

.combat-section h3 i {
  margin-right: 0.5rem;
  color: var(--eb-tan, #d4a574);
}

.combat-section .read-aloud {
  font-style: italic;
  background: rgba(212, 165, 116, 0.15);
  padding: 1rem;
  border-left: 4px solid var(--eb-tan, #d4a574);
  border-radius: 0 4px 4px 0;
}

/* Monster table in combat output */
.combat-section .monster-table {
  width: 100%;
  border-collapse: collapse;
  margin: 0.5rem 0;
}

.combat-section .monster-table th,
.combat-section .monster-table td {
  padding: 0.5rem 0.75rem;
  text-align: left;
  border-bottom: 1px solid var(--eb-tan, #d4a574);
}

.combat-section .monster-table th {
  background: var(--eb-tan, #d4a574);
  font-weight: bold;
  color: var(--eb-brown-dark, #5d4e37);
  text-transform: uppercase;
  font-size: 0.85rem;
}

.combat-section .monster-table tr:hover td {
  background: rgba(212, 165, 116, 0.15);
}

/* Tactics Section - Enhanced */
.combat-encounter-output .tactics-section {
  background: rgba(93, 78, 55, 0.05);
  border-radius: 6px;
  padding: 1rem 1.25rem;
}

.combat-encounter-output .tactics-section p {
  margin: 0 0 0.75rem 0;
  line-height: 1.7;
  color: var(--eb-text, #3d3d3d);
}

.combat-encounter-output .tactics-section p:last-child {
  margin-bottom: 0;
}

.combat-encounter-output .tactics-section strong {
  color: var(--eb-brown-dark, #5d4e37);
  font-weight: 600;
}

/* Taktik Sub-Headers */
.combat-encounter-output .tactics-section h4 {
  color: var(--eb-brown-dark, #5d4e37);
  font-size: 1rem;
  font-weight: 600;
  margin: 1rem 0 0.5rem 0;
  padding-bottom: 0.25rem;
  border-bottom: 1px dashed var(--eb-tan, #d4a574);
}

.combat-encounter-output .tactics-section h4:first-child {
  margin-top: 0;
}

/* Win Conditions Section - Enhanced */
.combat-encounter-output .win-section {
  background: rgba(93, 78, 55, 0.03);
  border-radius: 6px;
  padding: 1rem 1.25rem;
}

.combat-encounter-output .win-section p {
  margin: 0 0 0.75rem 0;
  line-height: 1.7;
  color: var(--eb-text, #3d3d3d);
}

.combat-encounter-output .win-section p:last-child {
  margin-bottom: 0;
}

.combat-encounter-output .win-section strong {
  color: var(--eb-brown-dark, #5d4e37);
  font-weight: 600;
}

/* Win Conditions als Liste */
.combat-encounter-output .win-section ul {
  margin: 0;
  padding-left: 0;
  list-style: none;
}

.combat-encounter-output .win-section li {
  margin-bottom: 0.75rem;
  padding: 0.5rem 0.75rem 0.5rem 2rem;
  position: relative;
  background: linear-gradient(90deg, rgba(212, 165, 116, 0.08), transparent);
  border-left: 3px solid var(--eb-tan, #d4a574);
  border-radius: 0 4px 4px 0;
}

.combat-encounter-output .win-section li:last-child {
  margin-bottom: 0;
}

.combat-encounter-output .win-section li::before {
  content: "â–¸";
  position: absolute;
  left: 0.5rem;
  color: var(--eb-tan, #d4a574);
  font-weight: bold;
}

.combat-encounter-output .win-section li strong {
  color: var(--eb-brown-dark, #5d4e37);
}

/* Win Conditions Sub-Headers */
.combat-encounter-output .win-section h4 {
  color: var(--eb-brown-dark, #5d4e37);
  font-size: 1rem;
  font-weight: 600;
  margin: 1rem 0 0.5rem 0;
  padding-bottom: 0.25rem;
  border-bottom: 1px dashed var(--eb-tan, #d4a574);
}

.combat-encounter-output .win-section h4:first-child {
  margin-top: 0;
}

.combat-footer {
  display: flex;
  gap: 0.75rem;
  justify-content: center;
  padding-top: 1rem;
  border-top: 1px solid var(--eb-tan, #d4a574);
  margin-top: 1rem;
}

.combat-footer button {
  padding: 0.5rem 1rem;
  border: none;
  border-radius: 4px;
  cursor: pointer;
  font-weight: 500;
  transition: all 0.2s ease;
}

.combat-footer .back-btn {
  background: #6c757d;
  color: white;
}

.combat-footer .back-btn:hover {
  background: #5a6268;
}

.combat-footer .regenerate-btn {
  background: var(--eb-tan, #d4a574);
  color: var(--eb-brown-dark, #5d4e37);
}

.combat-footer .regenerate-btn:hover {
  background: var(--eb-brown-dark, #5d4e37);
  color: white;
}

.combat-footer .save-btn {
  background: var(--eb-brown-dark, #5d4e37);
  color: white;
}

.combat-footer .save-btn:hover {
  background: var(--eb-brown, #8b7355);
}

/* ----------------------------------------------------------------------------
   Natural Wonder Mechanics Section (Interactive Wonders)
   ---------------------------------------------------------------------------- */

.wonder-mechanic-section {
  background: linear-gradient(135deg, #1a2a1a 0%, #2d4a2d 100%);
  border: 2px solid #4a7c4a;
  border-radius: 8px;
  padding: 1rem;
  margin: 1rem 0;
  color: #e8f5e8;
}

.wonder-mechanic-section h3 {
  margin: 0 0 0.8rem 0;
  color: #90EE90;
  font-size: 1.3rem;
  border-bottom: 1px solid #4a7c4a;
  padding-bottom: 0.5rem;
}

.wonder-mechanic-section h3 i {
  margin-right: 0.5rem;
  color: #FFD700;
}

.wonder-mechanic-box {
  display: flex;
  flex-direction: column;
  gap: 0.8rem;
}

.wonder-benefit-cost {
  display: grid;
  grid-template-columns: 1fr 1fr;
  gap: 1rem;
}

.wonder-benefit,
.wonder-cost {
  background: rgba(0, 0, 0, 0.3);
  padding: 0.6rem 0.8rem;
  border-radius: 4px;
}

.wonder-benefit .label,
.wonder-cost .label,
.wonder-rules .label {
  display: block;
  font-weight: bold;
  margin-bottom: 0.3rem;
  font-size: 0.9rem;
  color: #90EE90;
}

.wonder-benefit .label i { color: #50C878; }
.wonder-cost .label i { color: #FF6B6B; }
.wonder-rules .label i { color: #87CEEB; }

.wonder-benefit .value,
.wonder-cost .value {
  font-size: 1rem;
}

.wonder-rules {
  background: rgba(0, 0, 0, 0.2);
  padding: 0.6rem 0.8rem;
  border-radius: 4px;
  border-left: 3px solid #87CEEB;
}

.wonder-rules .value {
  margin: 0;
  line-height: 1.5;
  font-size: 0.95rem;
}

/* Wonder Tables */
.wonder-effect-table,
.wonder-condition-table,
.wonder-element-table {
  margin-top: 0.8rem;
}

.wonder-effect-table h4,
.wonder-condition-table h4,
.wonder-element-table h4 {
  margin: 0 0 0.5rem 0;
  color: #FFD700;
  font-size: 1rem;
}

.wonder-effect-table h4 i,
.wonder-condition-table h4 i,
.wonder-element-table h4 i {
  margin-right: 0.4rem;
}

.wonder-mechanic-section table {
  width: 100%;
  border-collapse: collapse;
  background: rgba(0, 0, 0, 0.3);
  border-radius: 4px;
  overflow: hidden;
}

.wonder-mechanic-section table thead {
  background: rgba(0, 0, 0, 0.4);
}

.wonder-mechanic-section table th,
.wonder-mechanic-section table td {
  padding: 0.5rem 0.7rem;
  text-align: left;
  border-bottom: 1px solid rgba(255, 255, 255, 0.1);
}

.wonder-mechanic-section table th {
  color: #90EE90;
  font-weight: bold;
  font-size: 0.85rem;
  text-transform: uppercase;
}

.wonder-mechanic-section table .roll-cell {
  font-weight: bold;
  color: #FFD700;
  width: 60px;
  text-align: center;
}

.wonder-mechanic-section table tr:last-child td {
  border-bottom: none;
}

.wonder-mechanic-section table tr:hover {
  background: rgba(255, 255, 255, 0.05);
}
